{"version":3,"sources":["Image/pencil.jpg","Image/move.jpg","Image/pencil-white.png","Image/ruber.png","Image/move-white.jpg","Image/ruber-white.png","Image/color-wheel.png","Functionality/Paint.jsx","Functionality/Mouse.jsx","Component/ToolBarComponent/Eraser.jsx","Component/ToolBarComponent/Pencil.jsx","Component/ToolBarComponent/Move.jsx","Component/ToolBarComponent/Filter.jsx","Component/ToolBarComponent/Resize.jsx","Component/ToolBarComponent/Shape.jsx","Component/ToolBarComponent/Text.jsx","Component/ToolBarComponent/Bucket.jsx","Component/ToolBarComponent/BezierCurve.jsx","Component/ToolBarComponent/ColorPallete.jsx","Component/ToolBar.jsx","Component/Settings.jsx","Component/Header.jsx","App.jsx","registerServiceWorker.js","index.js"],"names":["module","exports","__webpack_require__","p","Paint","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","getPosition","pos","lastPointerPositionTemp","startPainting","child","img","mode","stage","isGroup","color","sizePencil","brush","sizeEraser","ctx","getImage","getContext","elBrushOptions","document","querySelectorAll","lineWidth","globalCompositeOperation","lineJoin","lineCap","shadowBlur","shadowColor","forEach","brushOptions","_index","value","querySelector","selectedIndex","strokeStyle","beginPath","groupX","groupY","transformerX","transformerY","transformerWidth","transformerHeight","group","find","layer","undefined","parent","x","scaleX","y","scaleY","clipWidth","width","clipHeight","height","localPos","moveTo","getPointerPosition","localPositionTMP","getRandomFloat","min","max","Math","random","i","angle","PI","radius","fillStyle","fillRect","cos","sin","alert","lineTo","closePath","stroke","id","draw","React","Component","Mouse","appState","shape","scroll","e","scaleBy","stageWidth","round","target","style","toString","oldScale","mousePointTo","newScale","deltaY","scale","newPos","position","l","lenght","anchorSize","mouseUp","state","isDrawing","isMouseOnCanvas","mouseDown","event","evt","button","lastPointerPosition","mouseMove","layerManagement","stageLayer","children","_layersManagement","_stageLayers","activeLayer","key","_id","_children","dragGroup","layerFromManagement","layerFromStage","ch","console","log","preventMouseOverCanvas","className","mouseCircle","el","substr","size","parseInt","window","getComputedStyle","left","top","backgroundColor","display","dragLayerManagement","node","lm","pos1","pos2","pos3","pos4","addEventListener","dragMouseDown","oncontextmenu","navBar","footer","navBarHeight","footerHeight","innerWidth","onmouseup","onmousemove","tmpLeft","innerHeight","tmpTop","preventDefault","clientX","clientY","closeDragElement","elementDrag","offsetTop","offsetLeft","resizeElement","who","elResizer","onmousedown","Eraser","off","image","Image","src","ruber","stateClick","onload","setState","mouseClick","offAllButtons","elMove","removeAttribute","ruberWhite","changeMode","name","_this2","_this3","react_default","a","createElement","onMouseMove","onClick","Pencil","pencil","pencilWhite","ref","Move","move","moveWhite","Filter","filter","filterWhite","Resize","resize","resizeWhite","addResize","returnLayerManagement","returnStage","transformer","Konva","Transformer","rotateEnabled","preventMultipleFor2","currentIndex","index","_l","lastIndex","moveToTop","attachTo","add","click","preventMultipleFor3","removeChildren","moveDown","Shape","createRect","canvas","drawingPlace","shapeDrawingPlace","Rect","fill","Group","createStar","Star","numPoints","innerRadius","outerRadius","createArrow","Arrow","pointerLength","pointerWidth","strokeWidth","createCircle","Circle","createEllipse","Ellipse","retutnShapeDrawingPlace","shapeWhite","Text","text","createTextArea","textNode","fontSize","on","textPosition","getAbsolutePosition","stageBox","getContainer","getBoundingClientRect","areaPosition","textarea","body","appendChild","focus","removeChild","changeText","textWhite","Bucket","bucket","bucketWhite","BezierCurve","bezier","modifyBezier","createBezier","bezierSize","visible","createAnchor","anchor","draggable","bezierGroup","length","bezierWhite","ColorPallete","context","xx","nativeEvent","yy","pixel","getImageData","data","mosueClick","R","G","B","A","colorString","concat","r","getElementById","g","b","changeColor","colorWheel","drawImage","onMouseDown","ToolBar","stateMode","bezierMode","layers","returnStateBezier","buttonTab","preventMultipleFor4","preventMultipleFor5","dataFromColorPallete","dataFromText","returnColor","push","eraser","Eraser_Eraser","Pencil_Pencil","Move_Move","Filter_Filter","Resize_Resize","Shape_Shape","Text_Text","Bucket_Bucket","BezierCurve_BezierCurve","ColorPallete_ColorPallete","Settings","setSizePencil","changeSizePencil","setSizeBezier","changeSizeBezier","setSizeEraser","changeSizeEraser","setColor","setBrush","changeBrush","setFilter","_this$state","valueBlur","valueBrightness","valueContrast","valueGrayscale","valueHueRotate","valueInvert","valueOpacity","valueSaturate","valueSepia","changeFilter","setShape","whichShape","changeShape","setBezier","isClicked","whichBezier","changeBezier","resetFilter","changeOptionsMode","_this$state2","valueSizePencil","valueSizeEraser","valueSizeBezier","modes","PENCIL","htmlFor","type","onMouseLeave","blur","select","onChange","ERASER","FILTER","SHAPE","BEZIER","BUCKET","MOVE","colorBox","regExp","RegExp","splitEl","split","Header","exitCanvasOptions","popCanvasOptions","addImage","saveImg","AppTest","selectLayerManagementElColor","elLayerManagement","elInvisibleBtn","attributes","dataFromToolBar","buttonFromToolBar","dataFromSettings","sizeBezier","dataFromFilter","createBezierBtnClicked","canvasOptions","back","zIndex","newFile","canvasHeightOptions","canvasWidthOptions","newFileTMP","preventCenter","getStage","isNaN","_layer","defaultLayer","Layer","border","layers_TMP","splice","widthFrame","heightFrame","addLayer","addDrawingCanvas","isImg","tmpX","tmpY","tmpScaleX","tmpScaleY","breaker","imgPlace","files","FR","FileReader","result","readAsDataURL","filterTab","childrenCanvas","_layers","_shape","_groupChildren","abs","radiusX","radiusY","points","point","toCanvas","saveGroupURL","toDataURL","downloadImg","clip","layerTMP","nodeType","isVisible","clickLayer","_this$state3","setInvisible","removeLayer","getLayer","remove","displayLayer","moveLayerUpOrBottom","buttonUpClick","tmpLayerManagement","preventMoveToTheBottom","Array","prototype","from","to","moveUp","Function","saveAnchors","tmpPointerPosition","anchorLocation","start","center","end","saveFirstBezierPosition","saveCanvas","saveBezier","endPaintShape","anchors","clearRect","attrs","bezierCurveTo","clipFunc","tabX","tabY","MaxX","apply","MaxY","MinY","MinX","rect","localPos2","centerX","centerY","uri","link","download","href","_this4","Header_Header","clearDrawingPlace","clearAll","map","ToolBar_ToolBar","tob","Settings_Settings","lib","isLocalhost","Boolean","location","hostname","match","registerValidSW","swUrl","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","catch","error","ReactDOM","render","App_AppTest","URL","process","origin","fetch","response","status","headers","get","indexOf","ready","unregister","reload","checkValidServiceWorker","registerServiceWorker"],"mappings":"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","file":"static/js/main.41811eb8.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/pencil.c3992041.jpg\";","module.exports = __webpack_public_path__ + \"static/media/move.b10cd0bb.jpg\";","module.exports = __webpack_public_path__ + \"static/media/pencil-white.09f9d692.png\";","module.exports = __webpack_public_path__ + \"static/media/ruber.1fdf0851.png\";","module.exports = __webpack_public_path__ + \"static/media/move-white.329c531d.jpg\";","module.exports = __webpack_public_path__ + \"static/media/ruber-white.8c702c16.png\";","module.exports = __webpack_public_path__ + \"static/media/color-wheel.0fc36b2a.png\";","import React from 'react';\n\nexport default class Paint extends React.Component {\n    constructor(props) {\n        super(props);\n        this.lastPointerPositionTemp = 0;\n        this.localPositionTMP = {};\n    }\n\n    getPosition = (pos) => {\n        this.lastPointerPositionTemp = pos;\n    }\n    \n    startPainting = (child, img, mode, stage, isGroup, color, sizePencil, brush, sizeEraser) => {\n        if (!child) {\n            return;\n        }\n        let can = child.getImage();\n        let ctx = can.getContext('2d');\n        const elBrushOptions = document.querySelectorAll('.brush-list option');\n        if (mode === 'pencil') {\n            ctx.lineWidth = sizePencil;\n            ctx.globalCompositeOperation = 'source-over';\n        }\n        else if (mode === 'eraser') {\n            ctx.lineWidth = sizeEraser;\n            ctx.lineJoin = \"round\";\n            ctx.lineCap = \"round\";\n            ctx.shadowBlur = null;\n            ctx.shadowColor = null;\n            ctx.globalCompositeOperation = 'destination-out';\n        } else \n            return;\n\n        elBrushOptions.forEach((brushOptions, _index) => {\n            if (brushOptions.value === brush) {\n                document.querySelector('.brush-list').selectedIndex = _index ;\n            }\n        });\n        \n        ctx.strokeStyle = color;\n        \n        ctx.beginPath();\n        const group = stage.find('Group');\n        const layer = stage.find('Layer');\n        let density = 50;\n        let groupX;\n        let groupY;\n        let transformerX;\n        let transformerY;\n        let transformerWidth;\n        let transformerHeight;\n        \n        if (group[0] === undefined || isGroup === false) {\n            groupX = 0;\n            groupY = 0;\n            transformerX = 1;\n            transformerY = 1;\n            transformerWidth = 1;\n            transformerHeight = 1;\n        } else {\n            // child.parent is a group \n            groupX = child.parent.x() * stage.scaleX();\n            groupY = child.parent.y() * stage.scaleY();\n            transformerX = child.parent.scaleX();\n            transformerY = child.parent.scaleY();\n            // This is because i set width and height in group in App.jsx\n            transformerWidth = child.parent.parent.clipWidth() / child.parent.width();\n            transformerHeight = child.parent.parent.clipHeight() / child.parent.height();\n        }\n\n        // img = shape, layer[0] = layer\n        let localPos = {\n            x: (((this.lastPointerPositionTemp.x\n                - img.x()\n                - layer[0].x()\n                - stage.x()\n                - groupX) * transformerWidth)\n                / stage.scaleX())\n                / transformerX,\n\n            y: (((this.lastPointerPositionTemp.y\n                - img.y()\n                - layer[0].y()\n                - stage.y()\n                - groupY) * transformerHeight)\n                / stage.scaleY())\n                / transformerY,\n        }\n        if (brush !== 'spray' || mode === 'eraser')\n            ctx.moveTo(localPos.x, localPos.y);\n\n        let pos = stage.getPointerPosition();\n\n        localPos = {\n            x: (((pos.x\n                - img.x()\n                - layer[0].x()\n                - stage.x()\n                - groupX) * transformerWidth)\n                / stage.scaleX())\n                / transformerX,\n\n            y: (((pos.y\n                - img.y()\n                - layer[0].y()\n                - stage.y()\n                - groupY) * transformerHeight)\n                / stage.scaleY())\n                / transformerY,\n        }\n        this.localPositionTMP = {\n            x: localPos.x,\n            y: localPos.y,\n        };\n        if (mode !== 'eraser') {\n            switch (brush) {\n                case 'default':\n                    ctx.lineJoin = \"round\";\n                    ctx.lineCap = \"round\";\n                    ctx.shadowBlur = null;\n                    ctx.shadowColor = null;\n                    break;\n\n                case 'shadow':\n                    ctx.lineJoin = \"round\";\n                    ctx.lineCap = \"round\";\n                    ctx.shadowBlur = sizePencil;\n                    ctx.shadowColor = color;\n                    break;\n\n                case 'thick-brush':\n                    ctx.shadowBlur = null;\n                    ctx.shadowColor = null;\n                    ctx.lineJoin = 'miter';\n                    ctx.lineCap = 'butt';\n                    break;\n\n                case 'spray':\n                    function getRandomFloat(min, max) {\n                        return Math.random() * (max - min) + min;\n                    }\n\n                    for (var i = density; i--;) {\n                        var angle = getRandomFloat(0, Math.PI * 2);\n                        var radius = getRandomFloat(0, sizePencil);\n                        ctx.fillStyle = color;\n                        ctx.fillRect(\n                            localPos.x + radius * Math.cos(angle),\n                            localPos.y + radius * Math.sin(angle),\n                            1, 1);\n                    }\n                    break;\n\n                default:\n                    alert('Brush is undefined');\n                    break;\n            }\n        }\n        // group[0].width(localPos.x);\n        // group[0].height(localPos.y);\n        // group[0].children[0].width(localPos.x);\n        // group[0].children[0].height(localPos.y);\n        // group[0].children[1].width(localPos.x);\n        // group[0].children[1].height(localPos.y);\n\n        if (brush !== 'spray' || mode === 'eraser') {\n            ctx.lineTo(localPos.x, localPos.y);\n            ctx.closePath();\n            ctx.stroke();\n        }\n\n        this.lastPointerPositionTemp = pos;\n        // stage.draw();\n        if (img.parent.id === 'group') {\n            img.parent.parent.draw();\n        } else {\n            img.parent.draw();\n        }\n    }\n}","import React from 'react';\nimport Konva from 'konva';\nimport Paint from './Paint.jsx';\n\nexport default class Mouse extends React.Component {\n    constructor(props, stage, appState, mode, color, sizePencil, brush, sizeEraser, shape) {\n        super(props);\n\n        this.stage = stage;\n        this.appState = appState;\n        this.mode = mode;\n        this.color = color;\n        this.sizePencil = sizePencil;\n        this.brush = brush;\n        this.sizeEraser = sizeEraser;\n        this.shape = shape;\n        \n        this.state = {\n            isDrawing: false,\n            isMouseOnCanvas: false,\n            lastPointerPosition: 0,\n        }\n\n        this.Paint = new Paint(props);\n    }\n\n    scroll = (e, scaleBy) => {\n        let stageWidth = Math.round(this.stage.width() * 100) / 100;\n        if (e.target.style.width === stageWidth.toString() + 'px') {\n            var oldScale = this.stage.scaleX();\n\n            var mousePointTo = {\n                x: this.stage.getPointerPosition().x / oldScale - this.stage.x() / oldScale,\n                y: this.stage.getPointerPosition().y / oldScale - this.stage.y() / oldScale,\n            };\n\n            var newScale = e.deltaY < 0 ? oldScale * scaleBy : oldScale / scaleBy;\n            this.stage.scale({ x: newScale, y: newScale });\n\n            var newPos = {\n                x: -(mousePointTo.x - this.stage.getPointerPosition().x / newScale) * newScale,\n                y: -(mousePointTo.y - this.stage.getPointerPosition().y / newScale) * newScale\n            };\n            this.stage.position(newPos);\n            let l = this.stage.find('Transformer');\n            if (l.lenght > 0) {\n                l[0].anchorSize(10 + this.stage.scaleX());\n            }\n            this.stage.draw();\n        }\n    }\n\n    mouseUp = () => {\n        this.state.isDrawing = false;\n        this.state.isMouseOnCanvas = false;\n    }\n\n    mouseDown = (event) => {\n        // let e = window.event; FOR MAC OS\n        // if (e.button === 0) {\n            //     this.state.isDrawing = true;\n            //     this.state.isMouseOnCanvas = true;\n            //     this.state.lastPointerPosition = this.stage.getPointerPosition();\n            //     this.Paint.getPosition(this.state.lastPointerPosition);\n            // }\n        if (event.evt.button === 0) {\n            this.state.isDrawing = true;\n            this.state.isMouseOnCanvas = true;\n            this.state.lastPointerPosition = this.stage.getPointerPosition();\n            this.Paint.getPosition(this.state.lastPointerPosition);\n        }\n    }\n\n    mouseMove = (img) => {\n        const { layerManagement } = this.appState;\n        const stageLayer = this.stage.children;\n        let isGroup;\n\n        layerManagement.forEach(_layersManagement => {\n            stageLayer.forEach(_stageLayers => {\n                if (_layersManagement.activeLayer === 'true') {\n                    const { isDrawing } = this.state;\n                    const stage = this.stage;\n                    if (!isDrawing) {\n                        return;\n                    }\n                    if (_layersManagement.key === _stageLayers._id) {\n                        _stageLayers.children.forEach(_children => {\n                            // It's allow you to draw on previous layerManagement\n                            // It's divided like this because when I add image, img and draw  place are grouped\n                            if (_children.id() === 'drawingPlace') {\n                                isGroup = false;\n                                this.Paint.startPainting(_children, img, this.mode, stage, \n                                    isGroup, this.color, this.sizePencil, this.brush, this.sizeEraser);\n                            }\n\n                            if (_children.id() === 'group') {\n                                isGroup = true;\n                                this.Paint.startPainting(_children.children[1], img, this.mode, stage, \n                                    isGroup, this.color, this.sizePencil, this.brush, this.sizeEraser);\n                            }\n                        });\n                    }\n                }\n            });\n        });\n    }\n\n    /* NEW PROTOTYPE VERSION OF MOVE IMAGE */\n    dragGroup = () => {\n        const { layerManagement } = this.appState;\n        const stageLayer = this.stage.children;\n\n        layerManagement.forEach((layerFromManagement) => {\n            stageLayer.forEach(layerFromStage => {\n                if (layerFromManagement.activeLayer === 'true') {\n                    if (layerFromManagement.key === layerFromStage._id) {\n                        layerFromStage.children.forEach(ch => {\n                            if (ch.id() === 'group') {\n                                if (this.mode === 'move') {\n                                    let x = this.stage.getPointerPosition().x - this.stage.x();\n                                    let y = this.stage.getPointerPosition().y - this.stage.y();\n                                    ch.x(x / this.stage.scaleX());\n                                    ch.y(y / this.stage.scaleY());\n\n                                    this.stage.draw();\n                                    console.log(ch);\n                                }\n                            }\n                        });\n                    }\n                }\n            });\n        });\n    }\n\n    preventMouseOverCanvas = (e) => {\n        if (e.target.className === undefined) {\n            this.state.isDrawing = false;\n        }\n    }\n\n    mouseCircle = (e) => {\n        this.preventMouseOverCanvas(e);\n        const el = document.querySelector('.mouseCircle');\n        let tmpState = this.mode.substr(0, 3);\n        if (tmpState === 'no-' || this.mode === 'default') {\n            el.style.display = 'none';\n            return;\n        }\n\n        let size;\n        if (this.mode === 'pencil')\n            size = this.sizePencil;\n        else if (this.mode === 'eraser')\n            size = this.sizeEraser;\n\n        let width = parseInt(window.getComputedStyle(el).width, 10);\n        let height = parseInt(window.getComputedStyle(el).height, 10);\n        let x = this.stage.getPointerPosition().x;\n        let y = this.stage.getPointerPosition().y;\n        el.style.left = (x - (width / 2)) + 'px';\n        el.style.top = (y + 80 - (height / 2)) + 'px'; // 80 is header hight\n        el.style.width = (size * this.stage.scaleX()) + 'px';\n        el.style.height = (size * this.stage.scaleY()) + 'px';\n        if (this.mode === 'pencil')\n            el.style.backgroundColor = this.color;\n        else if (this.mode === 'eraser')\n            el.style.backgroundColor = '#fff';\n    }\n\n    dragLayerManagement = (node) => {\n        const lm = document.querySelector(node);\n        var pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;\n        if (document.querySelector(node)) {\n            // document.querySelector(node).oncontextmenu = dragMouseDown;\n            document.querySelector(node).addEventListener('mousedown', (event) => {\n                if (event.button === 2)\n                    dragMouseDown(event);\n            });\n        } else\n            lm.oncontextmenu = dragMouseDown;\n            \n        let navBar = document.querySelector('.nav-bar');\n        let footer = document.querySelector('footer');\n\n        let x = parseInt(window.getComputedStyle(lm).left, 10);\n        let y = parseInt(window.getComputedStyle(lm).top, 10);\n\n        let width = parseInt(window.getComputedStyle(lm).width, 10);\n        let height = parseInt(window.getComputedStyle(lm).height, 10);\n\n        let navBarHeight = parseInt(window.getComputedStyle(navBar).height, 10);\n        let footerHeight = parseInt(window.getComputedStyle(footer).height, 10);\n\n        if (x + width > window.innerWidth - 5) {\n            document.onmouseup = null;\n            document.onmousemove = null;\n            let tmpLeft = (x + width) - (window.innerWidth - 5);\n            lm.style.left = (x - tmpLeft) + \"px\";\n        }\n        else if (y + height > window.innerHeight - footerHeight - 5) {\n            document.onmouseup = null;\n            document.onmousemove = null;\n            let tmpTop = (y - height) + (window.innerHeight - footerHeight - 5);\n            lm.style.top = ((tmpTop - (y - height) - height) + \"px\");\n            \n        }\n        else if (x < 5) {\n            document.onmouseup = null;\n            document.onmousemove = null;\n            let tmpLeft = x - window.innerWidth - 5;\n            lm.style.left = x - (tmpLeft + window.innerWidth) + \"px\";\n        }\n        else if (y < navBarHeight + 5) {\n            document.onmouseup = null;\n            document.onmousemove = null;\n            let tmpTop = y - navBarHeight - 5;\n            lm.style.top = (y - navBarHeight - 5) - \n                           (tmpTop - navBarHeight - 5) + \"px\";\n        }\n        function dragMouseDown(e) {\n            e = e || window.event;\n            e.preventDefault();\n            pos3 = e.clientX;\n            pos4 = e.clientY;\n            document.onmouseup = closeDragElement;\n            document.onmousemove = elementDrag;\n        }\n\n        function elementDrag(e) {\n            e = e || window.event;\n            e.preventDefault();\n            pos1 = pos3 - e.clientX;\n            pos2 = pos4 - e.clientY;\n            pos3 = e.clientX;\n            pos4 = e.clientY;\n            lm.style.top = (lm.offsetTop - pos2) + \"px\";\n            lm.style.left = (lm.offsetLeft - pos1) + \"px\";\n        }\n        \n        function closeDragElement() {\n            document.onmouseup = null;\n            document.onmousemove = null;\n        }\n    }\n\n    resizeElement = (node, who) => {\n        const elResizer = document.querySelector(node);\n        const el = document.querySelector(who);\n        if (document.querySelector(node)) {\n            document.querySelector(node).onmousedown = dragMouseDown;\n        } else {\n            elResizer.onmousedown = dragMouseDown;\n        }\n\n        function dragMouseDown(e) {\n            e = e || window.event;\n            e.preventDefault();\n            document.onmouseup = closeDragElement;\n            document.onmousemove = elementDrag;\n        }\n\n        function elementDrag(e) {\n            e = e || window.event;\n            e.preventDefault();\n            el.style.width = (e.clientX - el.offsetLeft) + 'px';\n            el.style.height = (e.clientY - el.offsetTop) + 'px';\n        }\n\n        function closeDragElement() {\n            document.onmouseup = null;\n            document.onmousemove = null;\n        }\n    }\n}","import React from 'react';\r\nimport ruber from '../../Image/ruber.png';\r\nimport ruberWhite from '../../Image/ruber-white.png';\r\nimport Mouse from '../../Functionality/Mouse';\r\n\r\nexport default class Eraser extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            image: null,\r\n            stateClick: false,\r\n            mode: 'eraser',\r\n            name: 'eraser',\r\n        };\r\n\r\n        this.Mouse = new Mouse();\r\n    }\r\n    \r\n    componentDidMount() {\r\n        const image = new window.Image();\r\n        image.src = ruber;\r\n        image.width = 32;\r\n        image.height = 32;\r\n        image.onload = () => {\r\n            this.setState({\r\n                image: image,\r\n            });\r\n        };\r\n    }\r\n\r\n    off = () => {\r\n        const image = new window.Image();\r\n        image.width = 32;\r\n        image.height = 32;\r\n        image.src = ruber;\r\n        this.state.mode = 'no-eraser';\r\n        this.state.stateClick = false;\r\n        image.onload = () => {\r\n            this.setState({\r\n                image: image,\r\n                stateClick: false,\r\n                mode: 'no-eraser',\r\n            });\r\n        };\r\n    }\r\n\r\n    mouseClick = () => {\r\n        const { stateClick } = this.state;\r\n        this.props.offAllButtons();\r\n        const elMove = document.querySelector('.eraser-img');\r\n        if (!stateClick) {\r\n            const image = new window.Image();\r\n            image.width = 32;\r\n            image.height = 32;\r\n            image.src = ruberWhite;\r\n            this.state.mode = 'eraser';\r\n            elMove.id = 'eraser-id';\r\n            this.state.stateClick = true;\r\n            image.onload = () => {\r\n                this.setState({\r\n                    image: image,\r\n                    stateClick: true,\r\n                    mode: 'eraser',\r\n                });\r\n            };\r\n        } else {\r\n            const image = new window.Image();\r\n            image.width = 32;\r\n            image.height = 32;\r\n            image.src = ruber;\r\n            this.state.mode = 'no-eraser';\r\n            elMove.removeAttribute('id');\r\n            this.state.stateClick = false;\r\n            image.onload = () => {\r\n                this.setState({\r\n                    image: image,\r\n                    stateClick: false,\r\n                    mode: 'no-eraser',\r\n                });\r\n            };\r\n        }\r\n        \r\n        this.props.changeMode(this.state.mode);\r\n    }\r\n\r\n    render() {\r\n        const { image } = this.state;\r\n        let img;\r\n\r\n        if (image === null)\r\n            img = <img />;\r\n        else {\r\n            img = <div className={'eraser'}\r\n                    onMouseMove={() => { this.Mouse.dragLayerManagement('.eraser') }}\r\n                    onClick={this.mouseClick}>\r\n                        <img src={image.src}\r\n                            width={image.width}\r\n                            height={image.height}\r\n                            className={'eraser-img'}\r\n                        />\r\n                        <div className='eraser-resize'\r\n                            onMouseMove={() => { \r\n                                this.Mouse.resizeElement('.eraser-resize', '.eraser')\r\n                            }}>\r\n                        </div>\r\n                </div>\r\n        }\r\n        \r\n        return (\r\n            <div>\r\n                {img}\r\n            </div>\r\n        )\r\n    }\r\n} ","import React from 'react';\nimport pencil from '../../Image/pencil.jpg';\nimport pencilWhite from '../../Image/pencil-white.png';\nimport Mouse from '../../Functionality/Mouse';\n\nexport default class Pencil extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            image: null,\n            stateClick: false,\n            mode: 'pencil',\n            name: 'pencil',\n        };\n\n        this.Mouse = new Mouse();\n    }\n\n    componentDidMount() {\n        const image = new window.Image();\n        image.src = pencil;\n        image.width = 32;\n        image.height = 32;\n        image.onload = () => {\n            this.setState({\n                image: image,\n            });\n        };\n    }\n\n    off = () => {\n        const image = new window.Image();\n        image.width = 32;\n        image.height = 32;\n        image.src = pencil;\n        this.state.mode = 'no-pencil';\n        this.state.stateClick = false;\n        image.onload = () => {\n            this.setState({\n                image: image,\n                stateClick: false,\n                mode: 'no-pencil',\n            });\n        };\n    }\n\n    mouseClick = () => {\n        const { stateClick } = this.state;\n        this.props.offAllButtons();\n        const elMove = document.querySelector('.pencil-img');\n        if (!stateClick) {\n            const image = new window.Image();\n            image.width = 32;\n            image.height = 32;\n            image.src = pencilWhite;\n            this.state.mode = 'pencil';\n            elMove.id = 'pencil-id';\n            this.state.stateClick = true;\n            image.onload = () => {\n                this.setState({\n                    image: image,\n                    stateClick: true,\n                    mode: 'pencil',\n                });\n            };\n        } else {\n            const image = new window.Image();\n            image.width = 32;\n            image.height = 32;\n            image.src = pencil;\n            this.state.mode = 'no-pencil';\n            elMove.removeAttribute('id');\n            this.state.stateClick = false;\n            image.onload = () => {\n                this.setState({\n                    image: image,\n                    stateClick: false,\n                    mode: 'no-pencil',\n                });\n            };\n        }\n\n        this.props.changeMode(this.state.mode);\n    }\n\n    render() {\n        const { image } = this.state;\n        let img;\n\n        if (image === null)\n            img = <img \n                    ref={node => { this.pencil = node }}\n                    className={'pencil'}\n                />;\n        else\n            img = <div className={'pencil'}\n                onMouseMove={() => { this.Mouse.dragLayerManagement('.pencil') }}\n                onClick={this.mouseClick}>\n                <img src={image.src}\n                    width={image.width}\n                    height={image.height}\n                    className={'pencil-img'}\n                />\n                <div className='pencil-resize'\n                    onMouseMove={() => {\n                        this.Mouse.resizeElement('.pencil-resize', '.pencil')\n                    }}>\n                </div>\n            </div>\n\n        return (\n            <div>\n                {img}\n            </div>\n        )\n    }\n}","import React from 'react';\nimport move from '../../Image/move.jpg';\nimport moveWhite from '../../Image/move-white.jpg';\nimport Mouse from '../../Functionality/Mouse';\n\nexport default class Move extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            image: null,\n            stateClick: false,\n            mode: 'move',\n            name: 'move',\n        };\n\n        this.Mouse = new Mouse();\n    }\n    \n    componentDidMount() {\n        const image = new window.Image();\n        image.src = move;\n        image.width = 32;\n        image.height = 32;\n        image.onload = () => {\n            this.setState({\n                image: image,\n            });\n        };\n    }\n\n    off = () => {\n        const image = new window.Image();\n        image.width = 32;\n        image.height = 32;\n        image.src = move;\n        this.state.mode = 'no-move';\n        this.state.stateClick = false;\n        image.onload = () => {\n            this.setState({\n                image: image,\n                stateClick: false,\n                mode: 'no-move',\n            });\n        };\n    }\n\n    mouseClick = () => {\n        const {stateClick} = this.state;\n        this.props.offAllButtons();\n        const elMove = document.querySelector('.move-img');\n\n        if (!stateClick) {\n            const image = new window.Image();\n            image.width = 32;\n            image.height = 32;\n            image.src = moveWhite;\n            this.state.mode = 'move';\n            elMove.id = 'move-id';\n            this.state.stateClick = true;\n            image.onload = () => {\n                this.setState({\n                    image: image,\n                    stateClick: true,\n                    mode: 'move',\n                });\n            };\n        } else {\n            const image = new window.Image();\n            image.width = 32;\n            image.height = 32;\n            image.src = move;\n            this.state.mode = 'no-move';\n            elMove.removeAttribute('id');\n            this.state.stateClick = false;\n            image.onload = () => {\n                this.setState({\n                    image: image,\n                    stateClick: false,\n                    mode: 'no-move',\n                });\n            };\n        }\n\n        this.props.changeMode(this.state.mode);\n    }\n\n    render() {\n        const { image } = this.state;\n        let img;\n\n        if (image === null)\n            img = <img\n                ref={node => { this.pencil = node }}\n            />;\n        else\n            img = <div className={'move'}\n                onMouseMove={() => { this.Mouse.dragLayerManagement('.move') }}\n                onClick={this.mouseClick}>\n                <img src={image.src}\n                    width={image.width}\n                    height={image.height}\n                    className={'move-img'}\n\n                />\n                <div className='move-resize'\n                    onMouseMove={() => {\n                        this.Mouse.resizeElement('.move-resize', '.move')\n                    }}>\n                </div>\n            </div>\n\n        return (\n            <div>\n                {img}\n            </div>\n        )\n    }\n}","import React from 'react';\nimport filter from '../../Image/move.jpg';\nimport filterWhite from '../../Image/move-white.jpg';\nimport Mouse from '../../Functionality/Mouse';\n\nexport default class Filter extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            image: null,\n            stateClick: false,\n            mode: 'filter',\n            name: 'filter',\n        };\n\n        this.Mouse = new Mouse();\n    }\n\n    componentDidMount() {\n        const image = new window.Image();\n        image.src = filter;\n        image.width = 32;\n        image.height = 32;\n        image.onload = () => {\n            this.setState({\n                image: image,\n            });\n        };\n    }\n\n    off = () => {\n        const image = new window.Image();\n        image.width = 32;\n        image.height = 32;\n        image.src = filter;\n        this.state.mode = 'no-filter';\n        this.state.stateClick = false;\n        image.onload = () => {\n            this.setState({\n                image: image,\n                stateClick: false,\n                mode: 'no-filter',\n            });\n        };\n    }\n\n    mouseClick = () => {\n        const { stateClick } = this.state;\n        this.props.offAllButtons();\n        const elMove = document.querySelector('.filter-img');\n        if (!stateClick) {\n            const image = new window.Image();\n            image.width = 32;\n            image.height = 32;\n            image.src = filterWhite;\n            this.state.mode = 'filter';\n            elMove.id = 'filter-id';\n            this.state.stateClick = true;\n            image.onload = () => {\n                this.setState({\n                    image: image,\n                    stateClick: true,\n                    mode: 'filter',\n                });\n            };\n        } else {\n            const image = new window.Image();\n            image.width = 32;\n            image.height = 32;\n            image.src = filter;\n            this.state.mode = 'no-filter';\n            elMove.removeAttribute('id');\n            this.state.stateClick = false;\n            image.onload = () => {\n                this.setState({\n                    image: image,\n                    stateClick: false,\n                    mode: 'no-filter',\n                });\n            };\n        }\n\n        this.props.changeMode(this.state.mode);\n    }\n\n    render() {\n        const { image } = this.state;\n        let img;\n\n        if (image === null)\n            img = <img />;\n        else\n            img = <div className={'filter'}\n                    onMouseMove={() => { this.Mouse.dragLayerManagement('.filter') }}\n                    onClick={this.mouseClick}>\n                        <img src={image.src}\n                            width={image.width}\n                            height={image.height}\n                            className={'filter-img'}\n                        />\n                <div className='filter-resize'\n                    onMouseMove={() => { \n                        this.Mouse.resizeElement('.filter-resize', '.filter') \n                    }}>\n                </div>\n            </div>\n\n        return (\n            <div>\n                {img}\n            </div>\n        )\n    }\n}","import React from 'react';\nimport Konva from 'konva';\nimport resize from '../../Image/pencil.jpg';\nimport resizeWhite from '../../Image/pencil-white.png';\nimport Mouse from '../../Functionality/Mouse';\n\nexport default class Resize extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            image: null,\n            stateClick: false,\n            mode: 'resize',\n            name: 'resize',\n        };\n\n        this.Mouse = new Mouse();\n    }\n\n    componentDidUpdate() {\n        this.preventMultipleFor2 = true;\n        this.preventMultipleFor3 = true;\n    }\n\n    componentDidMount() {\n        this.lastIndex = 0;\n        this.currentIndex = 0;\n\n        const image = new window.Image();\n        image.src = resize;\n        image.width = 32;\n        image.height = 32;\n        image.onload = () => {\n            this.setState({\n                image: image,\n            });\n        };\n    }\n\n    off = () => {\n        const image = new window.Image();\n        image.width = 32;\n        image.height = 32;\n        image.src = resize;\n        this.state.mode = 'no-resize';\n        this.state.stateClick = false;\n        image.onload = () => {\n            this.setState({\n                image: image,\n                stateClick: false,\n                mode: 'no-resize',\n            });\n        };\n    }\n\n    mouseClick = () => {\n        const { stateClick } = this.state;\n        this.props.offAllButtons();\n        const elMove = document.querySelector('.resize-img');\n        if (!stateClick) {\n            const image = new window.Image();\n            image.width = 32;\n            image.height = 32;\n            image.src = resizeWhite;\n            this.state.mode = 'resize';\n            elMove.id = 'resize-id';\n            this.state.stateClick = true;\n            image.onload = () => {\n                this.setState({\n                    image: image,\n                    stateClick: true,\n                    mode: 'resize',\n                });\n            };\n        } else {\n            const image = new window.Image();\n            image.width = 32;\n            image.height = 32;\n            image.src = resize;\n            this.state.mode = 'no-resize';\n            elMove.removeAttribute('id');\n            this.state.stateClick = false;\n            image.onload = () => {\n                this.setState({\n                    image: image,\n                    stateClick: false,\n                    mode: 'no-resize',\n                });\n            };\n        }\n        this.props.changeMode(this.state.mode);\n        this.addResize();\n    }\n    \n    addResize = () => {\n        const layerManagement = this.props.returnLayerManagement();\n        const stageLayer = this.props.returnStage().children;\n        const elMove = document.querySelector('.resize-img');\n\n        // let this.preventMultipleFor3 = true;\n\n        layerManagement.forEach((layerFromManagement) => {\n            stageLayer.forEach(layerFromStage => {\n                if (layerFromManagement.activeLayer === 'true') {\n                    if (layerFromManagement.key === layerFromStage._id) {\n                        const transformer = new Konva.Transformer({\n                            id: 'transformer',\n                            // anchorSize: 2,\n                            rotateEnabled: false, // For now rotate are disabled\n                        });\n                        layerFromStage.children.forEach(ch => {\n                            if (ch.id() === 'group') {\n                                if (this.state.mode === 'resize') {\n                                    // ch.draggable(true);\n                                    if (ch.children[0].className === 'Rect' \n                                        || ch.children[0].className === 'Star'\n                                        || ch.children[0].className === 'Arrow'\n                                        || ch.children[0].className === 'Circle' \n                                        || ch.children[0].className === 'Ellipse') {\n                                            transformer.rotateEnabled(true);\n                                        }\n\n                                    if (this.preventMultipleFor2) {\n                                        this.currentIndex = layerFromStage.index;\n                                        stageLayer.forEach(_l => {\n                                            this.lastIndex = _l.index;\n                                        });\n                                        layerFromStage.moveToTop();\n    \n    \n                                        let parent = ch.parent;\n                                        transformer.attachTo(ch);\n                                        parent.add(transformer);\n                                        let l = this.props.returnStage().find('Transformer');\n                                        l[0].anchorSize(10 + this.props.returnStage().scaleX());\n                                        \n                                        elMove.click();\n                                        elMove.click();\n                                        // transformer.getLayer().batchDraw();\n                                        this.props.returnStage().draw();\n                                        this.preventMultipleFor2 = false;\n\n                                    }\n                                }\n                                else if (this.state.mode === 'no-resize') {\n                                    if (this.preventMultipleFor3) {\n                                        let layer = ch.parent;\n                                        let children = ch.parent.children[0];\n                                        layer.removeChildren();\n                                        layer.add(children);\n                                        this.props.returnStage().draw();\n\n                                        // ch.draggable(false);\n                                        for (let i = 0; i < this.lastIndex - this.currentIndex; i++) {\n                                            layerFromStage.moveDown();\n                                        }\n                                        this.preventMultipleFor3 = false;\n                                    }\n                                }\n                            }\n                        });\n                    }\n                }\n            });\n        });\n    }\n\n    render() {\n        const { image } = this.state;\n        let img;\n\n        if (image === null)\n            img = <img\n                ref={node => { this.resize = node }}\n                className={'resize'}\n            />;\n        else\n            img = <div className={'resize'}\n                onMouseMove={() => { this.Mouse.dragLayerManagement('.resize') }}\n                onClick={this.mouseClick}>\n                <img src={image.src}\n                    width={image.width}\n                    height={image.height}\n                    className={'resize-img'}\n                />\n                <div className='resize-resize'\n                    onMouseMove={() => {\n                        this.Mouse.resizeElement('.resize-resize', '.resize')\n                    }}>\n                </div>\n            </div>\n\n        return (\n            <div>\n                {img}\n            </div>\n        )\n    }\n}","import React from 'react';\nimport Konva from 'konva';\nimport shape from '../../Image/pencil.jpg';\nimport shapeWhite from '../../Image/pencil-white.png';\nimport Mouse from '../../Functionality/Mouse';\n\nexport default class Shape extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            image: null,\n            stateClick: false,\n            mode: 'shape',\n            name: 'shape',\n        };\n\n        this.Mouse = new Mouse();\n    }\n\n    componentDidMount() {\n        this.shapeDrawingPlace = 0;\n        const image = new window.Image();\n        image.src = shape;\n        image.width = 32;\n        image.height = 32;\n        image.onload = () => {\n            this.setState({\n                image: image,\n            });\n        };\n    }\n\n    off = () => {\n        const image = new window.Image();\n        image.width = 32;\n        image.height = 32;\n        image.src = shape;\n        this.state.mode = 'no-shape';\n        this.state.stateClick = false;\n        image.onload = () => {\n            this.setState({\n                image: image,\n                stateClick: false,\n                mode: 'no-shape',\n            });\n        };\n    }\n\n    createRect = (canvas, _stageLayers, drawingPlace, color) => {\n        this.shapeDrawingPlace = drawingPlace;\n        const shape = new Konva.Rect({\n            id: 'rect',\n            fill: color,\n            name: 'shape',\n        });\n\n        const group = new Konva.Group({\n            id: 'group',\n        });\n\n        group.add(shape);\n        _stageLayers.add(group);\n    }\n\n    createStar = (canvas, _stageLayers, drawingPlace, color) => {\n        const shape = new Konva.Star({\n            x: -9999,\n            y: -9999,\n            numPoints: 5,\n            innerRadius: canvas.width / 4,\n            outerRadius: canvas.width / 4,\n            id: 'star',\n            fill: color,\n            name: 'shape',\n        });\n        const group = new Konva.Group({\n            id: 'group',\n        });\n\n        group.add(shape);\n        _stageLayers.add(group);\n    }\n\n    createArrow = (canvas, _stageLayers, drawingPlace, color) => {\n        const shape = new Konva.Arrow({\n            pointerLength: 20,\n            pointerWidth: 20,\n            id: 'arrow',\n            fill: color,\n            stroke: color,\n            strokeWidth: 4,\n            name: 'shape',\n        });\n\n        const group = new Konva.Group({\n            id: 'group',\n        });\n\n        group.add(shape);\n        _stageLayers.add(group);\n    }\n\n    createCircle = (canvas, _stageLayers, drawingPlace, color) => {\n        const shape = new Konva.Circle({\n            x: -9999,\n            y: -9999,\n            radius: 70,\n            id: 'circle',\n            fill: color,\n            stroke: color,\n            strokeWidth: 4,\n            name: 'shape',\n        });\n\n        const group = new Konva.Group({\n            id: 'group',\n        });\n\n        group.add(shape);\n        _stageLayers.add(group);\n    }\n\n    createEllipse = (canvas, _stageLayers, drawingPlace, color) => {\n        const shape = new Konva.Ellipse({\n            x: -9999,\n            y: -9999,\n            radius: {\n                x: 100,\n                y: 50,\n            },\n            id: 'ellipse',\n            fill: color,\n            stroke: color,\n            strokeWidth: 4,\n            name: 'shape',\n        });\n\n        const group = new Konva.Group({\n            id: 'group',\n        });\n\n        group.add(shape);\n        _stageLayers.add(group);\n    }\n\n    retutnShapeDrawingPlace = () => {\n        return this.shapeDrawingPlace;\n    }\n\n    mouseClick = () => {\n        const { stateClick } = this.state;\n        this.props.offAllButtons();\n        const elMove = document.querySelector('.shape-img');\n        if (!stateClick) {\n            const image = new window.Image();\n            image.width = 32;\n            image.height = 32;\n            image.src = shapeWhite;\n            this.state.mode = 'shape';\n            elMove.id = 'shape-id';\n            this.state.stateClick = true;\n            image.onload = () => {\n                this.setState({\n                    image: image,\n                    stateClick: true,\n                    mode: 'shape',\n                });\n            };\n        } else {\n            const image = new window.Image();\n            image.width = 32;\n            image.height = 32;\n            image.src = shape;\n            this.state.mode = 'no-shape';\n            elMove.removeAttribute('id');\n            this.state.stateClick = false;\n            image.onload = () => {\n                this.setState({\n                    image: image,\n                    stateClick: false,\n                    mode: 'no-shape',\n                });\n            };\n        }\n\n        this.props.changeMode(this.state.mode);\n    }\n\n    render() {\n        const { image } = this.state;\n        let img;\n\n        if (image === null)\n            img = <img\n                ref={node => { this.shape = node }}\n                className={'shape'}\n            />;\n        else\n            img = <div className={'shape'}\n                onMouseMove={() => { this.Mouse.dragLayerManagement('.shape') }}\n                onClick={this.mouseClick}>\n                <img src={image.src}\n                    width={image.width}\n                    height={image.height}\n                    className={'shape-img'}\n                />\n                <div className='shape-resize'\n                    onMouseMove={() => {\n                        this.Mouse.resizeElement('.shape-resize', '.shape')\n                    }}>\n                </div>\n            </div>\n\n        return (\n            <div>\n                {img}\n            </div>\n        )\n    }\n}","import React from 'react';\nimport text from '../../Image/pencil.jpg';\nimport Konva from 'konva';\nimport textWhite from '../../Image/pencil-white.png';\nimport Mouse from '../../Functionality/Mouse';\n\nexport default class Text extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            image: null,\n            stateClick: false,\n            mode: 'text',\n            name: 'text',\n        };\n\n        this.Mouse = new Mouse();\n    }\n\n    componentDidMount() {\n        const image = new window.Image();\n        image.src = text;\n        image.width = 32;\n        image.height = 32;\n        image.onload = () => {\n            this.setState({\n                image: image,\n            });\n        };\n    }\n\n    off = () => {\n        const image = new window.Image();\n        image.width = 32;\n        image.height = 32;\n        image.src = text;\n        this.state.mode = 'no-text';\n        this.state.stateClick = false;\n        image.onload = () => {\n            this.setState({\n                image: image,\n                stateClick: false,\n                mode: 'no-text',\n            });\n        };\n    }\n\n    createTextArea = (canvas, _stageLayers, drawingPlace, stage) => {\n        const textNode = new Konva.Text({\n            id: 'text',\n            fontSize: 20,\n        });\n\n        const group = new Konva.Group({\n            id: 'group',\n        });\n\n        group.add(textNode);\n        _stageLayers.add(group);\n        // console.log(_stageLayers);\n\n        textNode.on('dblclick', () => {\n            // create textarea over canvas with absolute position\n\n            // first we need to find its positon\n            var textPosition = textNode.getAbsolutePosition();\n            var stageBox = stage.getContainer().getBoundingClientRect();\n\n            var areaPosition = {\n                x: textPosition.x + stageBox.left,\n                y: textPosition.y + stageBox.top\n            };\n\n\n            // create textarea and style it\n            var textarea = document.createElement('textarea');\n            document.body.appendChild(textarea);\n\n            textarea.value = textNode.text();\n            textarea.style.position = 'absolute';\n            textarea.style.top = areaPosition.y + 'px';\n            textarea.style.left = areaPosition.x + 'px';\n            textarea.style.width = textNode.width();\n\n            textarea.focus();\n\n\n            // textarea.addEventListener('keydown', function (e) {\n            //     // hide on enter\n            //     if (e.keyCode === 13) {\n            //         textNode.text(textarea.value);\n            //         stage.draw();\n            //         document.body.removeChild(textarea);\n            //     }\n            // });\n            textarea.addEventListener('mouseleave', function(e) {\n                textNode.text(textarea.value);\n                document.body.removeChild(textarea);\n                _stageLayers.draw();\n            });\n        });\n    }\n\n    mouseClick = () => {\n        const { stateClick } = this.state;\n        this.props.offAllButtons();\n        const elMove = document.querySelector('.text-img');\n        if (!stateClick) {\n            const image = new window.Image();\n            image.width = 32;\n            image.height = 32;\n            image.src = textWhite;\n            this.state.mode = 'text';\n            elMove.id = 'text-id';\n            this.state.stateClick = true;\n            this.props.changeText('on');\n            image.onload = () => {\n                this.setState({\n                    image: image,\n                    stateClick: true,\n                    mode: 'text',\n                });\n            };\n        } else {\n            const image = new window.Image();\n            image.width = 32;\n            image.height = 32;\n            image.src = text;\n            this.state.mode = 'no-text';\n            elMove.removeAttribute('id');\n            this.state.stateClick = false;\n            this.props.changeText('off');\n            image.onload = () => {\n                this.setState({\n                    image: image,\n                    stateClick: false,\n                    mode: 'no-text',\n                });\n            };\n        }\n\n        this.props.changeMode(this.state.mode);\n    }\n\n    render() {\n        const { image } = this.state;\n        let img;\n\n        if (image === null)\n            img = <img\n                ref={node => { this.text = node }}\n                className={'text'}\n            />;\n        else\n            img = <div className={'text'}\n                onMouseMove={() => { this.Mouse.dragLayerManagement('.text') }}\n                onClick={this.mouseClick}>\n                <img src={image.src}\n                    width={image.width}\n                    height={image.height}\n                    className={'text-img'}\n                />\n                <div className='text-resize'\n                    onMouseMove={() => {\n                        this.Mouse.resizeElement('.text-resize', '.text')\n                    }}>\n                </div>\n            </div>\n\n        return (\n            <div>\n                {img}\n            </div>\n        )\n    }\n}","import React from 'react';\nimport bucket from '../../Image/ruber.png';\nimport bucketWhite from '../../Image/ruber-white.png';\nimport Mouse from '../../Functionality/Mouse';\n\nexport default class Bucket extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            image: null,\n            stateClick: false,\n            mode: 'bucket',\n            name: 'bucket',\n        };\n\n        this.Mouse = new Mouse();\n    }\n\n    componentDidMount() {\n        const image = new window.Image();\n        image.src = bucket;\n        image.width = 32;\n        image.height = 32;\n        image.onload = () => {\n            this.setState({\n                image: image,\n            });\n        };\n    }\n\n    off = () => {\n        const image = new window.Image();\n        image.width = 32;\n        image.height = 32;\n        image.src = bucket;\n        this.state.mode = 'no-bucket';\n        this.state.stateClick = false;\n        image.onload = () => {\n            this.setState({\n                image: image,\n                stateClick: false,\n                mode: 'no-bucket',\n            });\n        };\n    }\n\n    mouseClick = () => {\n        const { stateClick } = this.state;\n        this.props.offAllButtons();\n        const elMove = document.querySelector('.bucket-img');\n        if (!stateClick) {\n            const image = new window.Image();\n            image.width = 32;\n            image.height = 32;\n            image.src = bucketWhite;\n            this.state.mode = 'bucket';\n            elMove.id = 'bucket-id';\n            this.state.stateClick = true;\n            image.onload = () => {\n                this.setState({\n                    image: image,\n                    stateClick: true,\n                    mode: 'bucket',\n                });\n            };\n        } else {\n            const image = new window.Image();\n            image.width = 32;\n            image.height = 32;\n            image.src = bucket;\n            this.state.mode = 'no-bucket';\n            elMove.removeAttribute('id');\n            this.state.stateClick = false;\n            image.onload = () => {\n                this.setState({\n                    image: image,\n                    stateClick: false,\n                    mode: 'no-bucket',\n                });\n            };\n        }\n\n        this.props.changeMode(this.state.mode);\n    }\n\n    render() {\n        const { image } = this.state;\n        let img;\n\n        if (image === null)\n            img = <img />;\n        else {\n            img = <div className={'bucket'}\n                onMouseMove={() => { this.Mouse.dragLayerManagement('.bucket') }}\n                onClick={this.mouseClick}>\n                <img src={image.src}\n                    width={image.width}\n                    height={image.height}\n                    className={'bucket-img'}\n                />\n                <div className='bucket-resize'\n                    onMouseMove={() => {\n                        this.Mouse.resizeElement('.bucket-resize', '.bucket')\n                    }}>\n                </div>\n            </div>\n        }\n\n        return (\n            <div>\n                {img}\n            </div>\n        )\n    }\n} ","import React from 'react';\nimport Konva from 'konva';\nimport bezier from '../../Image/move.jpg';\nimport bezierWhite from '../../Image/move-white.jpg';\nimport Mouse from '../../Functionality/Mouse';\n\nexport default class BezierCurve extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            image: null,\n            stateClick: false,\n            mode: 'bezier',\n            name: 'bezier',\n        };\n\n        this.Mouse = new Mouse();\n    }\n\n    componentDidMount() {\n        const image = new window.Image();\n        image.src = bezier;\n        image.width = 32;\n        image.height = 32;\n        image.onload = () => {\n            this.setState({\n                image: image,\n            });\n        };\n    }\n\n    off = () => {\n        const image = new window.Image();\n        image.width = 32;\n        image.height = 32;\n        image.src = bezier;\n        this.state.mode = 'no-bezier';\n        this.state.stateClick = false;\n        image.onload = () => {\n            this.setState({\n                image: image,\n                stateClick: false,\n                mode: 'no-bezier',\n            });\n        };\n    }\n\n    modifyBezier = () => {\n        \n    }\n\n    createBezier = (canvas, _stageLayers, drawingPlace, stage, bezierSize, color) => {\n        let ctx = canvas.getContext('2d');\n\n        ctx.lineWidth = bezierSize;\n        console.log(bezierSize);\n        ctx.globalCompositeOperation = 'source-over';\n        ctx.strokeStyle = color;\n\n        let img = new Konva.Image({\n            image: canvas,\n            id: 'bezierImage',\n            width: canvas.width,\n            height: canvas.height,\n            x: 0,\n            y: 0,\n            visible: true,\n        });\n\n        let group = new Konva.Group({\n            // width: canvas.width,\n            // height: canvas.height,\n            id: 'bezierGroup',\n        });\n\n        group.add(img);\n        _stageLayers.add(group);\n        stage.draw();\n    }\n\n    createAnchor = (x, y, stage) => {\n        let anchor = new Konva.Circle({\n            x: x,\n            y: y,\n            radius: 20,\n            stroke: '#666',\n            fill: '#ddd',\n            strokeWidth: 2,\n            draggable: true,\n            id: 'anchor'\n        });\n        let bezierGroup = stage.find('#bezierGroup');\n        console.log(bezierGroup);\n        if (bezierGroup.length === 0) {\n            // return;\n        }\n        bezierGroup[0].add(anchor);\n        stage.draw();\n\n        // anchor.on('dragend', () => {\n\n        // })\n    }\n\n    mouseClick = () => {\n        const { stateClick } = this.state;\n        this.props.offAllButtons();\n        const elMove = document.querySelector('.bezier-img');\n\n        if (!stateClick) {\n            const image = new window.Image();\n            image.width = 32;\n            image.height = 32;\n            image.src = bezierWhite;\n            this.state.mode = 'bezier';\n            elMove.id = 'bezier-id';\n            this.state.stateClick = true;\n            image.onload = () => {\n                this.setState({\n                    image: image,\n                    stateClick: true,\n                    mode: 'bezier',\n                });\n            };\n        } else {\n            const image = new window.Image();\n            image.width = 32;\n            image.height = 32;\n            image.src = bezier;\n            this.state.mode = 'no-bezier';\n            elMove.removeAttribute('id');\n            this.state.stateClick = false;\n            image.onload = () => {\n                this.setState({\n                    image: image,\n                    stateClick: false,\n                    mode: 'no-bezier',\n                });\n            };\n        }\n\n        this.props.changeMode(this.state.mode);\n    }\n\n    render() {\n        const { image } = this.state;\n        let img;\n\n        if (image === null)\n            img = <img\n                ref={node => { this.pencil = node }}\n            />;\n        else\n            img = <div className={'bezier'}\n                onMouseMove={() => { this.Mouse.dragLayerManagement('.bezier') }}\n                onClick={this.mouseClick}>\n                <img src={image.src}\n                    width={image.width}\n                    height={image.height}\n                    className={'bezier-img'}\n\n                />\n                <div className='bezier-resize'\n                    onMouseMove={() => {\n                        this.Mouse.resizeElement('.bezier-resize', '.bezier')\n                    }}>\n                </div>\n            </div>\n\n        return (\n            <div>\n                {img}\n            </div>\n        )\n    }\n}","import React from 'react';\nimport colorWheel from '../../Image/color-wheel.png';\nimport Mouse from '../../Functionality/Mouse';\n\nexport default class ColorPallete extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            context: null,\n            pixel: null,\n        }\n        this.Mouse = new Mouse();\n    }\n\n    componentDidMount() {\n        this.canvas = document.querySelector('.colorPallete');\n        const context = this.canvas.getContext('2d');\n        const image = new window.Image();\n        this.canvas.width = 150;\n        this.canvas.height = 150;\n        image.src = colorWheel;\n        context.fillStyle = 'black';\n        context.fillRect(0, 0, this.canvas.width, this.canvas.height);\n        image.onload = () => {\n            context.drawImage(image, 0, 0, this.canvas.width, this.canvas.height);\n            this.setState({\n                context: context,\n            });\n        };\n    }\n    \n    mouseMove = (e) => {\n        const { context } = this.state;\n        let xx = e.nativeEvent.clientX;\n        let yy = e.nativeEvent.clientY;\n        let image = {\n            x : parseInt(window.getComputedStyle(this.canvas).left, 10),\n            y : parseInt(window.getComputedStyle(this.canvas).top, 10),\n        }\n        \n        let pos = {\n            x: xx - image.x,\n            y: yy - image.y,\n        };\n        \n        let imageData = context.getImageData(pos.x, pos.y, 1, 1);\n        let pixel = imageData.data; \n        this.setState({\n            pixel: pixel,\n        });\n        this.Mouse.dragLayerManagement('.colorPallete');\n    }\n    \n    mosueClick = () => {\n        const {pixel} = this.state;\n        let color = {\n            R: pixel[0],\n            G: pixel[1],\n            B: pixel[2],\n            A: pixel[3],\n        }\n\n        let colorString = `rgba(${color.R},${color.G},${color.B},${color.A})`;\n        //Set value of rgba in settings options\n        const r = document.getElementById('color-R');\n        const g = document.getElementById('color-G');\n        const b = document.getElementById('color-B');\n        if (r !== null && g !== null && b !== null) {\n            r.value = color.R;\n            g.value = color.G;\n            b.value = color.B;\n        }\n\n        this.props.changeColor(colorString);\n    } \n\n    render() {\n        return (\n            <div>\n                <canvas className={'colorPallete'} \n                    onMouseDown={this.mosueClick} \n                    onMouseMove={(e) => { this.mouseMove(e) }}\n                >\n                </canvas>\n            </div>\n        )\n    }\n}","import React from 'react';\nimport Eraser from './ToolBarComponent/Eraser';\nimport Pencil from './ToolBarComponent/Pencil';\nimport Move from './ToolBarComponent/Move';\nimport Filter from './ToolBarComponent/Filter';\nimport Resize from './ToolBarComponent/Resize';\nimport Shape from './ToolBarComponent/Shape';\nimport Text from './ToolBarComponent/Text';\nimport Bucket from './ToolBarComponent/Bucket';\nimport BezierCurve from './ToolBarComponent/BezierCurve';\nimport ColorPallete from './ToolBarComponent/ColorPallete';\n\n\nexport default class ToolBar extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            mode: 'default',\n            color: '#df4b26',\n            draggable: true,\n            buttonTab: [],\n        }\n    }\n\n    componentDidMount() {\n        this.lastIndex = 0;\n        this.currentIndex = 0;\n\n        // this.lastIndex2 = 0;\n        // this.currentIndex2 = 0;\n\n        this.state.buttonTab.push(this.eraser);\n        this.state.buttonTab.push(this.move);\n        this.state.buttonTab.push(this.pencil);\n        this.state.buttonTab.push(this.filter);\n        this.state.buttonTab.push(this.resize);\n        this.state.buttonTab.push(this.shape);\n        this.state.buttonTab.push(this.text);\n        this.state.buttonTab.push(this.bucket);\n        this.state.buttonTab.push(this.bezier);\n    }\n\n    componentDidUpdate() {\n        this.preventMultipleFor2 = true;\n        this.preventMultipleFor3 = true;\n        this.preventMultipleFor4 = true;\n        this.preventMultipleFor5 = true;\n    }\n\n    changeMode = (stateMode, bezierMode) => {\n        const stageLayer = this.props.returnStage().children;\n        const layers = this.props.returnLayerManagement();\n        let stateBezier = this.props.returnStateBezier();\n\n        this.state.buttonTab.forEach(button => {\n            if (button.state.mode === stateMode)\n                return;\n        });\n\n        layers.forEach((layerFromManagement) => {\n            stageLayer.forEach(layerFromStage => {\n                if (layerFromManagement.activeLayer === 'true') {\n                    if (layerFromManagement.key === layerFromStage._id) {\n                        layerFromStage.children.forEach(ch => {\n                            console.log(ch);\n                            if (ch.id() === 'group' || ch.id() === 'bezierGroup') {\n                                if (stateMode === 'move') {\n                                    if (this.preventMultipleFor2) {\n                                        ch.draggable(true);\n                                        this.currentIndex = layerFromStage.index;\n                                        stageLayer.forEach(_l => {\n                                            this.lastIndex = _l.index;\n                                        });\n                                        layerFromStage.moveToTop();\n                                        this.preventMultipleFor2 = false;\n                                    }\n                                }\n                                if (stateMode === 'bezier') {\n                                    if (this.preventMultipleFor4) {\n                                        if (ch.id() === 'bezierGroup') {\n                                            this.currentIndex = layerFromStage.index;\n                                            stageLayer.forEach(_l => {\n                                                this.lastIndex = _l.index;\n                                            });\n                                            layerFromStage.moveToTop();\n                                            this.preventMultipleFor4 = false;\n                                        }\n                                    }\n                                }\n                                if (stateMode === 'no-move') {\n                                    ch.draggable(false);\n                                    if (this.preventMultipleFor3) {\n                                        for (let i = 0; i < this.lastIndex - this.currentIndex; i++) {\n                                            layerFromStage.moveDown();\n                                        }\n                                        this.preventMultipleFor3 = false;\n                                        this.lastIndex = 0;\n                                        this.currentIndex = 0;\n                                    }\n                                }\n                                if (stateMode === 'no-bezier') {\n                                    if (ch.id() === 'bezierGroup') {\n                                        if (this.preventMultipleFor5) {\n                                            for (let i = 0; i < this.lastIndex - this.currentIndex; i++) {\n                                                layerFromStage.moveDown();\n                                            }\n                                            this.preventMultipleFor5 = false;\n                                            this.lastIndex = 0;\n                                            this.currentIndex = 0;\n                                        }\n                                    }\n                                }\n                            }\n                        });\n                    }\n                }\n            });\n        });\n\n        this.setState({\n            mode: stateMode,\n        });\n\n        this.props.mode(stateMode, this.state.buttonTab);\n    }\n\n    changeColor = (dataFromColorPallete) => {\n        this.setState({color: dataFromColorPallete});\n        this.props.color(dataFromColorPallete);\n    }\n\n    changeText = (dataFromText) => {\n        this.props.text(dataFromText);\n    }\n\n    returnColor = () => {\n        return this.state.color;\n    }\n\n    render() {\n        return (\n            <div>\n                <Eraser changeMode={this.changeMode} ref={node => {this.eraser = node}}\n                    offAllButtons={() => {this.props.offAllButtons()}}/>\n                <Pencil changeMode={this.changeMode} ref={node => { this.pencil = node }}\n                    offAllButtons={() => { this.props.offAllButtons() }}/>\n                <Move changeMode={this.changeMode} ref={node => { this.move = node }}\n                    offAllButtons={() => { this.props.offAllButtons() }}/>\n                <Filter changeMode={this.changeMode} ref={node => { this.filter = node }}\n                    offAllButtons={() => { this.props.offAllButtons() }}/>\n                <Resize changeMode={this.changeMode} ref={node => { this.resize = node }}\n                    returnStage={this.props.returnStage}\n                    returnLayerManagement={this.props.returnLayerManagement}\n                    offAllButtons={() => { this.props.offAllButtons() }}/>\n                <Shape changeMode={this.changeMode} ref={node => {this.shape = node}}\n                    offAllButtons={() => { this.props.offAllButtons() }}/>\n                <Text changeMode={this.changeMode} ref={node => {this.text = node}}\n                    offAllButtons={() => { this.props.offAllButtons() }}\n                    changeText={this.changeText}/>\n                <Bucket changeMode={this.changeMode} ref={node => {this.bucket = node}}\n                    offAllButtons={() => { this.props.offAllButtons() }}\n                    changeText={this.changeText}/>\n                <BezierCurve changeMode={this.changeMode} ref={node => {this.bezier = node}}\n                    offAllButtons={() => { this.props.offAllButtons() }}\n                    changeText={this.changeText}/>\n                <ColorPallete changeColor={this.changeColor}/>\n            </div>\n        )\n    }\n}","import React from 'react';\nimport Mouse from '../Functionality/Mouse';\n\nexport default class Settings extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.modes = {\n            PENCIL: 'pencil',\n            ERASER: 'eraser',\n            MOVE: 'move',\n            FILTER: 'filter',\n            SHAPE: 'shape',\n            BEZIER: 'bezier',\n            BUCKET: 'bucket',\n        }\n\n        this.state = {\n            valueBlur: '0',\n            valueBrightness: '100',\n            valueContrast: '100',\n            valueGrayscale: '0',\n            valueHueRotate: '0',\n            valueInvert: '0',\n            valueOpacity: '100',\n            valueSaturate: '100',\n            valueSepia: '0',\n            valueSizePencil: 5,\n            valueSizeEraser: 5,\n            valueSizeBezier: 5,\n            whichShape: '',\n            bezier: '',\n        }\n\n        this.Mouse = new Mouse();\n    }\n    \n    componentDidUpdate() {\n        if (this.props.mode === this.modes.PENCIL || this.props.mode === this.modes.SHAPE || this.props.mode === this.modes.BEZIER || this.props.mode === this.modes.BUCKET) {\n            this.colorBox = document.querySelector('#color-box');\n            this.colorBox.style.backgroundColor = this.props.color;\n        }\n\n        const el = document.querySelector('#color-box');\n        const r = document.getElementById('color-R');\n        const g = document.getElementById('color-G');\n        const b = document.getElementById('color-B');\n\n        if (el !== null && r !== null && g !== null && b !== null) {\n            let regExp = new RegExp('\\\\D');\n            let splitEl = el.style.backgroundColor.split(regExp);\n            r.value = splitEl[4];\n            g.value = splitEl[6];\n            b.value = splitEl[8];\n        }\n    }\n\n    setSizePencil = (e) => {\n        this.props.changeSizePencil(e.target.value);\n    }\n\n    setSizeBezier = (e) => {\n        this.props.changeSizeBezier(e.target.value);\n    }\n\n    setSizeEraser = (e) => {\n        this.props.changeSizeEraser(e.target.value);\n    }\n\n    setColor = () => {\n        const r = document.getElementById('color-R');\n        const g = document.getElementById('color-G');\n        const b = document.getElementById('color-B');\n        let color = 'rgba(' + r.value + ','\n                            + g.value + ','\n                            + b.value + ','\n                            + '255)';\n\n        this.props.changeColor(color);\n    }\n\n    setBrush = (e) => {\n        this.props.changeBrush(e.target.value);\n    }\n\n    setFilter = () => {\n        const { valueBlur, valueBrightness, valueContrast,\n            valueGrayscale, valueHueRotate, valueInvert,\n            valueOpacity, valueSaturate, valueSepia, } = this.state;\n            \n        let filter = 'blur(' + valueBlur + \n                    'px) brightness(' + valueBrightness + \n                    '%) contrast(' + valueContrast + \n                    '%) grayscale(' + valueGrayscale + \n                    '%) hue-rotate(' + valueHueRotate + \n                    'deg) invert(' + valueInvert + \n                    '%) opacity(' + valueOpacity + \n                    '%) saturate(' + valueSaturate + \n                    '%) sepia(' + valueSepia + '%)';\n        const elKonva = document.querySelector('.konvajs-content');\n        elKonva.style.filter = filter;\n\n        this.props.changeFilter(filter);\n    }\n\n    setShape = (shape) => {\n        this.state.whichShape = shape;\n        this.props.changeShape(shape);\n        this.setState({\n            whichShape: shape,\n        });\n    }\n\n    setBezier = (bezier, isClicked) => {\n        this.state.whichBezier = bezier;\n        this.props.changeBezier(bezier, isClicked);\n        this.setState({\n            whichBezier: bezier,\n        });\n    }\n\n    resetFilter = () => {\n        this.state.valueBlur = '0';\n        this.state.valueBrightness = '100';\n        this.state.valueContrast = '100';\n        this.state.valueGrayscale = '0';\n        this.state.valueHueRotate ='0';\n        this.state.valueInvert ='0';\n        this.state.valueOpacity ='100';\n        this.state.valueSaturate ='100';\n        this.state.valueSepia ='0';\n\n        this.setFilter();\n\n        this.setState({\n            valueBlur: '0',\n            valueBrightness: '100',\n            valueContrast: '100',\n            valueGrayscale: '0',\n            valueHueRotate: '0',\n            valueInvert: '0',\n            valueOpacity: '100',\n            valueSaturate: '100',\n            valueSepia: '0',\n        })\n    }\n\n    changeOptionsMode = () => {\n        const el = document.querySelector('.settings');\n        const { valueBlur, valueBrightness, valueContrast,\n            valueGrayscale, valueHueRotate, valueInvert, \n            valueOpacity, valueSaturate, valueSepia,\n            valueSizePencil, valueSizeEraser, valueSizeBezier} = this.state;\n\n        switch (this.props.mode) {\n            case this.modes.PENCIL:\n                el.style.display = 'block';\n                return (\n                    <ul>\n                        <li className={'pencil-size-options'}>\n                            <label htmlFor='size'>pencil size</label>\n                            <input id='size' type='text' value={valueSizePencil}\n                                onMouseLeave={(e) => {e.target.blur()}}\n                                onClick={(e) => { e.target.select() }}\n                                onChange={(e) => { \n                                    this.state.valueSizePencil = e.target.value;\n                                    this.setSizePencil(e)\n                                    if (!e.target.value || e.target.value === '0') {\n                                        this.state.valueSizePencil = 5;\n                                        alert('Pencil size can not be a 0 or null');\n                                    }\n                                 }}\n                            >\n                            </input>\n                        </li>\n                        <li>\n                            <select className={'brush-list'}\n                                onChange={(e) => { this.setBrush(e) }}\n                                >\n                                <option value=\"default\">Default</option>\n                                <option value=\"shadow\">Shadow</option>\n                                <option value=\"thick-brush\">Thick brush</option>\n                                <option value=\"spray\">Spray</option>\n                            </select>\n                        </li>\n                        <li className={'rgb-options'}>\n                            <label htmlFor='color-R'>R</label>\n                            <input id='color-R' type='text'\n                                onMouseLeave={(e) => { e.target.blur() }}\n                                onClick={(e) => {e.target.select()}}\n                                onChange={(e) => { \n                                    this.setColor() \n                                }}\n                            >\n                            </input>\n                            <label htmlFor='color-G'>G</label>\n                            <input id='color-G' type='text'\n                                onMouseLeave={(e) => { e.target.blur() }}\n                                onClick={(e) => { e.target.select() }}\n                                onChange={(e) => { \n                                    this.setColor()\n                                }}\n                            >\n                            </input>\n                            <label htmlFor='color-B'>B</label>\n                            <input id='color-B' type='text'\n                                onMouseLeave={(e) => { e.target.blur() }}\n                                onClick={(e) => { e.target.select() }}\n                                onChange={(e) => { \n                                    this.setColor()\n                                }}\n                            >\n                            </input>\n                        </li>\n                        <div className={'color-box-wrapper'}>\n                            <div id='color-box'></div>\n                        </div>\n                    </ul>\n                )\n                break;\n            case this.modes.ERASER:\n                el.style.display = 'block';\n                return (\n                    <ul>\n                        <li>\n                            <label htmlFor='size'>eraser size</label>\n                            <input id='size' type='text' value={valueSizeEraser}\n                                onMouseLeave={(e) => { e.target.blur() }}\n                                onClick={(e) => { e.target.select() }}\n                                onChange={(e) => { \n                                    this.state.valueSizeEraser = e.target.value;\n                                    this.setSizeEraser(e);\n                                    if (!e.target.value || e.target.value === '0') {\n                                        this.state.valueSizeEraser = 5;\n                                        alert('Eraser size can not be a 0 or null');\n                                    }\n                                }}>\n                            </input>\n                        </li>\n                    </ul>\n                )\n                break;\n            case this.modes.FILTER:\n                el.style.display = 'block';\n                return (\n                    <ul>\n                        <li>\n                            <label htmlFor='blur'>blur {valueBlur}px</label>\n                            <input id='blur' type='range'\n                                min='0' max='20' value={valueBlur}\n                                onChange={(e) => { \n                                    this.state.valueBlur = e.target.value;\n                                    this.setFilter(e, e.target.id, 'px');\n                                    this.setState({valueBlur: e.target.value});\n                                }}>\n                            </input>\n                        </li>\n                        <li>\n                            <label htmlFor='brightness'>brightness {valueBrightness}%</label>\n                            <input id='brightness' type='range'\n                                min='0' max='500' value={valueBrightness}\n                                onChange={(e) => {\n                                    this.state.valueBrightness = e.target.value;\n                                    this.setFilter(e, e.target.id, '%');\n                                    this.setState({ valueBrightness: e.target.value });\n                                }}>\n                            </input>\n                        </li>\n                        <li>\n                            <label htmlFor='contrast'>contrast {valueContrast}%</label>\n                            <input id='contrast' type='range'\n                                onChange={(e) => {\n                                    this.state.valueContrast = e.target.value;\n\n                                    this.setFilter(e, e.target.id, '%');\n                                    this.setState({ valueContrast: e.target.value });\n                                }}>\n                            </input>\n                        </li>\n                        <li>\n                            <label htmlFor='grayscale'>grayscale {valueGrayscale}%</label>\n                            <input id='grayscale' type='range'\n                                min='0' max='100' value={valueGrayscale}\n                                onChange={(e) => {\n                                    this.state.valueGrayscale = e.target.value;\n\n                                    this.setFilter(e, e.target.id, '%');\n                                    this.setState({ valueGrayscale: e.target.value });\n                                }}>\n                            </input>\n                        </li>\n                        <li>\n                            <label htmlFor='hue-rotate'>hue rotate {valueHueRotate}deg</label>\n                            <input id='hue-rotate' type='range'\n                                min='0' max='360' value={valueHueRotate}\n                                onChange={(e) => {\n                                    this.state.valueHueRotate = e.target.value;\n\n                                    this.setFilter(e, e.target.id, '%');\n                                    this.setState({ valueHueRotate: e.target.value });\n                                }}>\n                            </input>\n                        </li>\n                        <li>\n                            <label htmlFor='invert'>invert {valueInvert}%</label>\n                            <input id='invert' type='range'\n                                min='0' max='100' value={valueInvert}\n                                onChange={(e) => {\n                                    this.state.valueInvert = e.target.value;\n\n                                    this.setFilter(e, e.target.id, '%');\n                                    this.setState({ valueInvert: e.target.value });\n                                }}>\n                            </input>\n                        </li>\n                        <li>\n                            <label htmlFor='opacity'>opacity {valueOpacity}%</label>\n                            <input id='opacity' type='range'\n                                min='0' max='100' value={valueOpacity}\n                                onChange={(e) => {\n                                    this.state.valueOpacity = e.target.value;\n\n                                    this.setFilter(e, e.target.id, '%');\n                                    this.setState({ valueOpacity: e.target.value });\n                                }}>\n                            </input>\n                        </li>\n                        <li>\n                            <label htmlFor='saturate'>saturate {valueSaturate}%</label>\n                            <input id='saturate' type='range'\n                                min='0' max='500' value={valueSaturate}\n                                onChange={(e) => {\n                                    this.state.valueSaturate = e.target.value;\n\n                                    this.setFilter(e, e.target.id, '%');\n                                    this.setState({ valueSaturate: e.target.value });\n                                }}>\n                            </input>\n                        </li>\n                        <li>\n                            <label htmlFor='sepia'>sepia {valueSepia}%</label>\n                            <input id='sepia' type='range'\n                                min='0' max='100' value={valueSepia}\n                                onChange={(e) => {\n                                    this.state.valueSepia = e.target.value;\n\n                                    this.setFilter(e, e.target.id, '%');\n                                    this.setState({ valueSepia: e.target.value });\n                                }}>\n                            </input>\n                        </li>\n                        <li>\n                            <button id='reset'\n                                onMouseDown={() => { this.resetFilter() }}>\n                                reset\n                            </button>\n                        </li>\n                    </ul>\n                )\n                break;\n\n            case this.modes.SHAPE:\n                el.style.display = 'block';\n                return (\n                    <ul>\n                        <li>\n                            <button\n                                onMouseDown={() => {\n                                    this.setShape('rect');\n                                }}>\n                                    rect\n                            </button>\n                        </li>\n                        <li>\n                            <button\n                                onMouseDown={() => {\n                                    this.setShape('star');\n                                }}>\n                                    star\n                            </button>\n                        </li>\n                        <li>\n                            <button\n                                onMouseDown={() => {\n                                    this.setShape('arrow');\n                                }}>\n                                    arrow\n                            </button>\n                        </li>\n                        <li>\n                            <button\n                                onMouseDown={() => {\n                                    this.setShape('circle');\n                                }}>\n                                    circle\n                            </button>\n                        </li>\n                        <li>\n                            <button\n                                onMouseDown={() => {\n                                    this.setShape('ellipse');\n                                }}>\n                                    ellipse\n                            </button>\n                        </li>\n                        <div className={'color-box-wrapper'}>\n                            <div id='color-box'></div>\n                        </div>\n                    </ul>\n                )\n                break;\n\n            case this.modes.BEZIER:\n                el.style.display = 'block';\n                return (\n                    <ul>\n                        <li>\n                            <button\n                                onMouseDown={() => {\n                                    // this.setShape('rect');\n                                    this.setBezier('create-bezier', true);\n                                }}>\n                                    Create Bezier\n                            </button>\n                        </li>\n                        <li>\n                            <button\n                                onMouseDown={() => {\n                                    this.setBezier('modify-bezier');\n                                }}>\n                                    Modify Bezier\n                            </button>\n                        </li>\n                        <li className={'pencil-size-options'}>\n                            <label htmlFor='size'>pencil size</label>\n                            <input id='size' type='text' value={valueSizeBezier}\n                                onMouseLeave={(e) => {e.target.blur()}}\n                                onClick={(e) => { e.target.select() }}\n                                onChange={(e) => { \n                                    this.state.valueSizeBezier = e.target.value;\n                                    this.setSizeBezier(e)\n                                    if (!e.target.value || e.target.value === '0') {\n                                        this.state.valueSizeBezier = 5;\n                                        alert('Pencil size can not be a 0 or null');\n                                    }\n                                 }}\n                            >\n                            </input>\n                        </li>\n                        <li className={'rgb-options'}>\n                            <label htmlFor='color-R'>R</label>\n                            <input id='color-R' type='text'\n                                onMouseLeave={(e) => { e.target.blur() }}\n                                onClick={(e) => {e.target.select()}}\n                                onChange={(e) => { \n                                    this.setColor() \n                                }}\n                            >\n                            </input>\n                            <label htmlFor='color-G'>G</label>\n                            <input id='color-G' type='text'\n                                onMouseLeave={(e) => { e.target.blur() }}\n                                onClick={(e) => { e.target.select() }}\n                                onChange={(e) => { \n                                    this.setColor()\n                                }}\n                            >\n                            </input>\n                            <label htmlFor='color-B'>B</label>\n                            <input id='color-B' type='text'\n                                onMouseLeave={(e) => { e.target.blur() }}\n                                onClick={(e) => { e.target.select() }}\n                                onChange={(e) => { \n                                    this.setColor()\n                                }}\n                            >\n                            </input>\n                        </li>\n                        <div className={'color-box-wrapper'}>\n                            <div id='color-box'></div>\n                        </div>\n                    </ul>\n                )\n                break;\n            case this.modes.BUCKET:\n                el.style.display = 'block';\n                return (\n                    <ul>\n                        <li className={'rgb-options'}>\n                            <label htmlFor='color-R'>R</label>\n                            <input id='color-R' type='text'\n                                onMouseLeave={(e) => { e.target.blur() }}\n                                onClick={(e) => {e.target.select()}}\n                                onChange={(e) => { \n                                    this.setColor() \n                                }}\n                            >\n                            </input>\n                            <label htmlFor='color-G'>G</label>\n                            <input id='color-G' type='text'\n                                onMouseLeave={(e) => { e.target.blur() }}\n                                onClick={(e) => { e.target.select() }}\n                                onChange={(e) => { \n                                    this.setColor()\n                                }}\n                            >\n                            </input>\n                            <label htmlFor='color-B'>B</label>\n                            <input id='color-B' type='text'\n                                onMouseLeave={(e) => { e.target.blur() }}\n                                onClick={(e) => { e.target.select() }}\n                                onChange={(e) => { \n                                    this.setColor()\n                                }}\n                            >\n                            </input>\n                        </li>\n                        <div className={'color-box-wrapper'}>\n                            <div id='color-box'></div>\n                        </div>\n                    </ul>\n                )\n                break;\n            default:\n                if (el !== null)\n                    el.style.display = 'none';\n                break;\n        }\n    }\n\n    render() {\n        return (\n            <div className='settings'\n                onMouseMove={() => { this.Mouse.dragLayerManagement('.settings')}}\n            >\n                {this.changeOptionsMode()}\n            </div>\n        )\n    }\n}","import React from 'react';\n\nexport default class Header extends React.Component {\n    constructor(props) {\n        super(props)\n    }\n\n    componentDidMount() {\n    }\n\n    exitCanvasOptions = () => {\n        this.props.popCanvasOptions();\n    }\n\n    render() {\n        return (\n              <ul className='nav-bar'>\n                <li className='nav-bar-iteam logo'>\n                    <a>LOGO</a>\n                </li>\n                <li className='nav-bar-iteam'>\n                    <a onClick={this.props.popCanvasOptions}>\n                        NEW\n                    </a>\n                    <ul className='canvas-options'>\n                        <li>\n                            <span className='canvas-options-exit'\n                                onMouseDown={this.props.popCanvasOptions}>\n                                X\n                            </span>\n                        </li>\n                        <li>\n                            <label htmlFor='canvas-width'>\n                                WIDTH (in pxl)\n                            </label>\n\n                            <input id='canvas-width'\n                                className='canvas-options-input' >\n                            </input>\n                        </li>\n\n                        <li>\n                            <label htmlFor='canvas-height'>\n                                HEIGHT (in pxl)\n                            </label>\n\n                            <input id='canvas-height'\n                                className='canvas-options-input'>\n                            </input>\n                        </li>\n\n                        <li>\n                            <button className='canvas-otpions-btn'\n                                onClick={this.props.add}>\n                                CREATE CANVAS\n                            </button>\n                        </li>\n                    </ul>\n                </li>\n\n                <li className='nav-bar-iteam'>\n                    <a>\n                        <input type='file' name='add-image' id='add-image' onChange={this.props.addImage}/>\n                        <label htmlFor='add-image' >Add image</label>\n                    </a>\n                </li>\n\n                <li className='nav-bar-iteam'>\n                    <a onClick={this.props.saveImg}>\n                        SAVE\n                    </a>\n                </li>\n              </ul>\n        )\n    }\n}","import './App.css';\nimport React from 'react';\nimport { Stage, Layer, Rect } from 'react-konva';\nimport Konva from 'konva';\nimport ToolBar from './Component/ToolBar';\nimport Shape from './Component/ToolBarComponent/Shape';\nimport Text from './Component/ToolBarComponent/Text';\nimport BezierCurve from './Component/ToolBarComponent/BezierCurve';\nimport Settings from './Component/Settings';\nimport Header from './Component/Header';\nimport Mouse from './Functionality/Mouse';\n\nexport default class AppTest extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      mode: 'default',\n      color: '#000',\n      sizePencil : 5,\n      sizeEraser : 5,\n      sizeBezier: 5,\n      shape: 'none',\n      bezier: 'none',\n      text: 'off',\n      brush: 'default',\n      createBezierBtnClicked: false,\n      filter : '',\n      image: null,\n      widthFrame: window.innerWidth / 2,\n      heightFrame: window.innerHeight / 2,\n      layerManagement: [],\n      newFile: false,\n      buttonTab: [],\n    };\n\n    this.defaultLayer = 0;\n    this.border = 0;\n  }\n  \n  componentDidMount() {\n    document.oncontextmenu = new Function(\"return false;\");\n    this.getStage = this.stage.getStage();\n    this.scaleBy = 1.1;\n    this.preventCenter = false;\n    this.saveAnchors = 0;\n    this.tmpPointerPosition = {\n      x: 0,\n      y: 0,\n    };\n    this.anchorLocation = {\n      start: 0,\n      center: 0,\n      end: 0,\n    };\n    this.saveFirstBezierPosition = undefined;\n    this.saveCanvas = 0;\n    this.saveBezier = 0;\n    this.endPaintShape = false;\n\n    this.getStage.on('mousedown', (e) => {\n      if (e.evt.button === 2) {\n        this.getStage.draggable(true);\n      }\n    });\n\n    this.getStage.on('mouseup', (e) => {\n      this.getStage.draggable(false);\n    });\n    \n    window.addEventListener('wheel', (e) => {\n      this.Mouse.scroll(e, this.scaleBy);\n    });\n    \n    this.getStage.on('mouseenter', () => {\n      const el = document.querySelector('.mouseCircle');\n      if (this.state.mode === 'pencil' || this.state.mode === 'eraser') {\n        el.style.display = 'block';\n      }\n    });\n\n    this.getStage.on('mouseleave', () => {\n      const el = document.querySelector('.mouseCircle');\n      el.style.display = 'none';\n    });\n\n    this.displayLayer();\n    this.Shape = new Shape();\n    this.Text = new Text();\n    this.BezierCurve = new BezierCurve();\n    this.Settings = new Settings();\n\n  }\n\n  componentDidUpdate() {\n    this.Mouse = new Mouse(this.props, this.getStage, this.state, \n                          this.state.mode, this.state.color, \n                          this.state.sizePencil, this.state.brush,\n                          this.state.sizeEraser, this.state.shape);\n    console.log(this.getStage);\n    console.log(this.state.mode);\n    console.log('TEST');\n    if (this.state.shape === 'rect' \n        || this.state.shape === 'star' \n        || this.state.shape === 'arrow'\n        || this.state.shape === 'circle'\n        || this.state.shape === 'ellipse'\n        || this.state.text === 'on'\n        || this.state.bezier === 'create-bezier') {\n      this.addLayer(null);\n      this.state.shape = 'none';\n      this.state.bezier = 'none';\n      this.state.text = 'off';\n    }\n    if (this.state.bezier === 'modify-bezier') {\n      const { layerManagement } = this.state;\n      const stageLayer = this.getStage.children;\n\n      layerManagement.forEach(_layersManagement => {\n        stageLayer.forEach((_stageLayers, i) => {\n          if (_layersManagement.activeLayer === 'true') {\n            if (_stageLayers._id === _layersManagement.key) {\n              this.saveAnchors = _stageLayers.find('Circle');\n              this.saveAnchors.forEach(anchor => {\n                anchor.visible(true);\n              });\n            }\n          }\n        });\n      });\n    }\n    this.selectLayerManagementElColor();\n    this.getStage.on('mousedown', (e) => {\n      if (this.state.mode === 'bucket') {\n        const { layerManagement } = this.state;\n        const stageLayer = this.getStage.children;\n        \n        layerManagement.forEach(_layersManagement => {\n          stageLayer.forEach((_stageLayers, i) => {\n            if (_layersManagement.activeLayer === 'true') {\n              if (_stageLayers._id === _layersManagement.key) {\n                if (_stageLayers.children[0].id() === 'drawingPlace') {\n                  if(e.target === _stageLayers.children[0]) {\n                    let canvas = _stageLayers.children[0].getImage();\n                    let ctx = canvas.getContext('2d');\n                    ctx.fillStyle = this.state.color;\n                    ctx.fillRect(_stageLayers.children[0].x(), _stageLayers.children[0].y(), \n                                  _stageLayers.children[0].width(), _stageLayers.children[0].height());\n                  }\n                }\n                console.log(_stageLayers.children[0]);\n                if (_stageLayers.children[0].id() === 'group') { // TODO: When you add Image you cant use bucket on Image because e.target !== _stageLayers.children[0].children[0] you must set to children[1]\n                  if (_stageLayers.children[0].children[0].id() === 'imgPlace') {\n                    if (e.target === _stageLayers.children[0].children[1]) {\n                      console.log(_stageLayers.children[0].children[1].getImage());\n                      let canvas = _stageLayers.children[0].children[1].getImage();\n                      let ctx = canvas.getContext('2d');\n                      ctx.fillStyle = this.state.color;\n                      ctx.fillRect(_stageLayers.children[0].children[1].x(), _stageLayers.children[0].children[1].y(),\n                                    _stageLayers.width(), _stageLayers.height());\n                    }\n                  }\n                  if (_stageLayers.children[0].children[0].name() === 'shape') {\n                    if (e.target === _stageLayers.children[0].children[0]) {\n                      _stageLayers.children[0].children[0].fill(this.state.color);\n                      _stageLayers.children[0].children[0].stroke(this.state.color);\n                    }\n                  }\n                  if (_stageLayers.children[0].children[0].id() === 'text') {\n                    if (e.target === _stageLayers.children[0].children[0]) {\n                      _stageLayers.children[0].children[0].fill(this.state.color);\n                    }\n                  }\n                }\n              }\n            }\n          });\n        });\n        // console.log(e.target);\n        // if (e.target.id() === 'drawingPlace') {\n        //   let canvas = e.target.getImage();\n        //   let ctx = canvas.getContext('2d');\n        //   ctx.fillStyle = this.state.color;\n        //   ctx.fillRect(e.target.x(), e.target.y(), e.target.width(), e.target.height());\n        // }\n        // if (e.target.name() === 'shape') {\n        //   e.target.fill(this.state.color);\n        //   e.target.stroke(this.state.color);\n        // }\n        this.getStage.draw();\n      }\n      if (this.state.mode === 'text') {   \n        const { layerManagement } = this.state;\n        const stageLayer = this.getStage.children;\n\n        layerManagement.forEach(_layersManagement => {\n          stageLayer.forEach((_stageLayers, i) => {\n            if (_layersManagement.activeLayer === 'true') {\n              if (_stageLayers._id === _layersManagement.key) {\n                let groupX = _stageLayers.children[0].x() * this.getStage.scaleX();\n                let groupY = _stageLayers.children[0].y() * this.getStage.scaleY();\n\n                let localPos = {\n                  x: (((this.getStage.getPointerPosition().x\n                    - this.getStage.x()\n                    - groupX))\n                    / this.getStage.scaleX()),\n\n                  y: (((this.getStage.getPointerPosition().y\n                    - this.getStage.y()\n                    - groupY))\n                    / this.getStage.scaleY())\n                }\n                //This for create Text\n                _stageLayers.children[0].children[0].x(localPos.x);\n                _stageLayers.children[0].children[0].y(localPos.y);\n                _stageLayers.children[0].children[0].text('Some Text');\n                // this.getStage.draw();\n              }\n            }\n          });\n        });\n        this.offAllButtons();\n      }\n      else if (this.state.mode === 'shape' || this.state.mode === 'bezier') {\n        this.endPaintShape = true;\n        this.tmpPointerPosition = {\n          x: this.getStage.getPointerPosition().x,\n          y: this.getStage.getPointerPosition().y,\n        }\n        // this.tmpPointerPosition2 = {\n        //   x: this.getStage.getPointerPosition().x,\n        //   y: this.getStage.getPointerPosition().y,\n        // }\n      }\n      // this.getStage.draw();     \n    });\n    this.getStage.on('mouseup', () => {\n      if (this.state.mode === 'shape' || this.state.mode === 'bezier') {\n        this.endPaintShape = false;\n        let anchors;\n        if (this.state.mode === 'bezier' && this.state.createBezierBtnClicked === true) {\n          if (this.saveCanvas === 0) {\n            // return;\n          }\n          console.log(this.saveCanvas);\n          let ctx = this.saveCanvas.getContext('2d');\n          if (this.state.bezier !== 'modify-bezier') {\n            let anchorss = this.getStage.find(node => {\n              return node.className === 'Circle' && node.id() === 'anchor'; \n            });\n            anchorss.forEach(node => {\n              node.visible(false);\n              this.getStage.draw();\n            });\n            \n            ctx.clearRect(0, 0, this.saveCanvas.width, this.saveCanvas.height);\n            ctx.beginPath();\n            ctx.moveTo(this.anchorLocation.start.x, this.anchorLocation.start.y);\n            ctx.lineTo(this.anchorLocation.end.x, this.anchorLocation.end.y);\n            ctx.closePath();\n            ctx.stroke();\n            \n            // this.getStage.draw();\n            if (this.anchorLocation.center.x < 0)\n            this.anchorLocation.center.x = this.anchorLocation.center.x * (-1);\n            \n            if (this.anchorLocation.center.y < 0)\n            this.anchorLocation.center.y = this.anchorLocation.center.y * (-1);\n            \n            this.BezierCurve.createAnchor(this.anchorLocation.start.x, this.anchorLocation.start.y, this.getStage);\n            this.BezierCurve.createAnchor(this.anchorLocation.center.x, this.anchorLocation.center.y, this.getStage);\n            this.BezierCurve.createAnchor(this.anchorLocation.center.x - 50, this.anchorLocation.center.y - 50, this.getStage);\n            this.BezierCurve.createAnchor(this.anchorLocation.end.x, this.anchorLocation.end.y, this.getStage);\n            anchors = this.getStage.find(node => {\n              return node.className === 'Circle' && node.visible();\n            });\n          } else {\n            anchors = this.saveAnchors;\n            // this.state.bezier = 'none';\n            return;\n          }\n\n          // let anchors = this.getStage.find('Circle');\n          anchors.forEach(anchor => {\n            anchor.on('dragmove', () => {\n              ctx.clearRect(0, 0, this.saveCanvas.width, this.saveCanvas.height);\n\n              ctx.beginPath();\n              ctx.moveTo(anchors[0].attrs.x, anchors[0].attrs.y);\n              ctx.bezierCurveTo(anchors[1].attrs.x, anchors[1].attrs.y,\n                                anchors[2].attrs.x - 50, anchors[2].attrs.y - 50,\n                                anchors[3].attrs.x, anchors[3].attrs.y);\n              ctx.stroke();\n              anchor.parent.parent.draw();\n              // this.getStage.draw();\n            });\n          });\n          // let a = this.getStage.find(node => {\n          //   return node.className === 'Circle' && node.visible(true);\n          // });\n          // this.saveBezier.setClip({\n          //   x:  this.anchorLocation.start.x,\n          //   y:  this.anchorLocation.start.y,\n          //   width: Math.abs(this.anchorLocation.start.x - this.anchorLocation.end.x),\n          //   height: Math.abs(this.anchorLocation.start.y - this.anchorLocation.end.y),\n          // });\n          // let tabX = [];\n          // let tabY = [];\n          // this.saveBezier.children.forEach(anchors => {\n          //   if (anchors.id() === 'anchor') {\n          //     tabX.push(anchors.x());\n          //     tabY.push(anchors.y());\n          //   }\n          // });\n          // console.table(tabX);\n          // console.table(tabY);\n          // let MaxX = Math.max.apply(Math, tabX);\n          // let MaxY = Math.max.apply(Math, tabY);\n          // console.log(MaxX);\n          // console.log(MaxY);\n\n          // let MinX = Math.min.apply(Math, tabX);\n          // let MinY = Math.min.apply(Math, tabY);\n          // console.log(MinX);\n          // console.log(MinY);\n\n          this.saveBezier.clipFunc(function(ctx, e) {\n            let tabX = [];\n            let tabY = [];\n            e.children.forEach(anchors => {\n              if (anchors.id() === 'anchor') {\n                tabX.push(anchors.x());\n                tabY.push(anchors.y());\n              }\n            });\n            let MaxX = Math.max.apply(Math, tabX);\n            let MaxY = Math.max.apply(Math, tabY);\n\n            let MinY = Math.min.apply(Math, tabY);\n            let MinX = Math.min.apply(Math, tabX);\n            // ctx.clearRect(0, 0, 800, 800);\n            // console.log(e);\n            // ctx.beginPath();\n            // ctx.moveTo(e.children[1].attrs.x, e.children[1].attrs.y);\n            // ctx.lineTo(e.children[4].attrs.x, e.children[4].attrs.y);\n            // ctx.closePath();\n            // ctx.stroke();\n\n            // // ctx.clearRect(0, 0, 800, 800);\n            // ctx.beginPath();\n            // ctx.moveTo(e.children[1].attrs.x, e.children[1].attrs.y);\n            // ctx.bezierCurveTo(e.children[2].attrs.x, e.children[2].attrs.y,\n            //                   e.children[3].attrs.x - 50, e.children[3].attrs.y - 50,\n            //                   e.children[4].attrs.x, e.children[4].attrs.y);\n            // ctx.stroke();\n\n            // ctx.clearRect(0, 0, 800, 800);\n            // ctx.beginPath();\n            // ctx.arc(e.children[1].attrs.x, e.children[1].attrs.y, e.children[1].attrs.radius, 0, Math.PI * 2, false);\n            // ctx.arc(e.children[2].attrs.x, e.children[2].attrs.y, e.children[2].attrs.radius, 0, Math.PI * 2, false);\n            // ctx.arc(e.children[3].attrs.x, e.children[3].attrs.y, e.children[3].attrs.radius, 0, Math.PI * 2, false);\n            // ctx.arc(e.children[4].attrs.x, e.children[4].attrs.y, e.children[4].attrs.radius, 0, Math.PI * 2, false);\n            // ctx.stroke();\n            // ctx.closePath();\n            // // ctx.fill('nonzero');\n            \n            ctx.clearRect(0, 0, 800, 800);\n            ctx.rect(MinX - 20, MinY - 20, (Math.abs(MaxX - MinX) + 40), (Math.abs(MinY - MaxY) + 40));\n          });\n          this.getStage.draw();\n        }\n        console.log(this.state.bezier);\n        if (this.state.bezier !== 'modify-bezier') {\n          this.offAllButtons();\n        }\n        this.saveFirstBezierPosition = undefined;\n        this.state.createBezierBtnClicked = false;\n      }\n    });\n\n    this.getStage.on('mousemove', (e) => {\n      if (this.state.mode === 'shape' || this.state.mode === 'bezier') {\n        if (this.state.bezier !== 'modify-bezier') {\n          const { layerManagement } = this.state;\n          const stageLayer = this.getStage.children;\n          if (!this.endPaintShape)\n          return;\n          \n          layerManagement.forEach(_layersManagement => {\n            stageLayer.forEach(_stageLayers => {\n              if (_layersManagement.activeLayer === 'true') {\n                if (_stageLayers._id === _layersManagement.key) {\n                    let groupX = _stageLayers.children[0].x() * this.getStage.scaleX();\n                    let groupY = _stageLayers.children[0].y() * this.getStage.scaleY();\n\n                    let localPos = {\n                      x: (((this.getStage.getPointerPosition().x\n                        - this.getStage.x()\n                        - groupX))\n                        / this.getStage.scaleX()),\n\n                      y: (((this.getStage.getPointerPosition().y\n                        - this.getStage.y()\n                        - groupY))\n                        / this.getStage.scaleY())\n                    }\n\n                    let localPos2 = {\n                      x: (((this.tmpPointerPosition.x\n                        - this.getStage.x()\n                        - groupX))\n                        / this.getStage.scaleX()),\n\n                      y: (((this.tmpPointerPosition.y\n                        - this.getStage.y()\n                        - groupY))\n                        / this.getStage.scaleY())\n                    }\n                    //This is for crate shape from mouse move\n                    if (this.state.mode === 'bezier' && this.state.createBezierBtnClicked === true) {\n                      if (_stageLayers.children[0].children === undefined) {\n                        // return;\n                      }\n                      let img = _stageLayers.children[0].children[0].getImage();\n                      this.saveCanvas = img;\n                      this.saveBezier = _stageLayers.children[0];\n                      let ctx = img.getContext('2d');\n                      ctx.beginPath();\n                      localPos = {\n                        x: (((this.tmpPointerPosition.x\n                          - this.getStage.x()\n                          - groupX))\n                          / this.getStage.scaleX()),\n\n                        y: (((this.tmpPointerPosition.y\n                          - this.getStage.y()\n                          - groupY))\n                          / this.getStage.scaleY())\n                      }\n                      if (this.saveFirstBezierPosition === undefined)\n                      this.saveFirstBezierPosition = localPos;\n                      \n                      ctx.moveTo(localPos.x, localPos.y);\n                      // ctx.moveTo(this.saveFirstBezierPosition.x, this.saveFirstBezierPosition.y);\n                      // ctx.bezierCurveTo(localPos.x, localPos.y + 30, localPos.x + 50, localPos.y + 50, localPos.x + 100, localPos.y + 100);\n\n\n                      let pos = this.getStage.getPointerPosition();\n\n                      localPos = {\n                        x: (((pos.x\n                          - this.getStage.x()\n                          - groupX))\n                          / this.getStage.scaleX()),\n\n                        y: (((pos.y\n                          - this.getStage.y()\n                          - groupY))\n                          / this.getStage.scaleY())\n                      }\n                      let centerX = (localPos.x - this.saveFirstBezierPosition.x) / 2;\n                      let centerY = (localPos.y - this.saveFirstBezierPosition.y) / 2;\n\n                      this.anchorLocation = {\n                        start: this.saveFirstBezierPosition,\n                        center: {\n                          x: localPos.x - centerX,\n                          y: localPos.y - centerY,\n                        },\n                        end: localPos,\n                      }\n\n                      ctx.lineTo(localPos.x, localPos.y);\n                      ctx.closePath();\n                      ctx.stroke();\n                      this.tmpPointerPosition = pos;\n                      // this.getStage.draw();\n                      _stageLayers.draw();\n                    }\n                    if (this.state.mode === 'shape') {\n                      if (_stageLayers.children[0].nodeType === 'Group') {\n                        _stageLayers.children[0].children[0].x(localPos2.x);\n                        _stageLayers.children[0].children[0].y(localPos2.y);\n                        _stageLayers.children[0].children[0].width(localPos.x - localPos2.x);\n                        _stageLayers.children[0].children[0].height(localPos.y - localPos2.y);\n                        _stageLayers.children[0].children[0].fill(this.state.color);\n                        _stageLayers.children[0].children[0].stroke(this.state.color);\n                        if (_stageLayers.children[0].children[0].className === 'Arrow')\n                          _stageLayers.children[0].children[0].points([0, 0,\n                            localPos.x - localPos2.x,\n                            localPos.y - localPos2.y]);\n                        if (_stageLayers.children[0].children[0].className === 'Circle')\n                          if (_stageLayers.children[0].children[0].attrs.radius < 0)\n                            _stageLayers.children[0].children[0].attrs.radius = 0;\n\n                        if (_stageLayers.children[0].children[0].className === 'Ellipse') {\n                          if (_stageLayers.children[0].children[0].attrs.radiusX < 0)\n                            _stageLayers.children[0].children[0].attrs.radiusX = 0;\n                          if (_stageLayers.children[0].children[0].attrs.radiusY < 0)\n                            _stageLayers.children[0].children[0].attrs.radiusX = 0;\n                        }\n                        // this.getStage.draw();\n                        _stageLayers.draw();\n                      }\n                    }\n                  }\n                }\n              });\n            });\n          }\n        }\n    });\n  }\n\n  selectLayerManagementElColor = () => {\n    const elLayerManagement = document.querySelectorAll(\n                          '.layer-management ul li');\n\n    const elInvisibleBtn = document.querySelectorAll('.invisible-btn');\n\n    elLayerManagement.forEach(el => {\n      if (el.attributes['name'].value === 'true')\n        el.style.backgroundColor = '#888';\n      else\n        el.style.backgroundColor = '#666';\n    });\n\n    elInvisibleBtn.forEach(el => {\n      if (el.attributes['name'].value === 'true')\n        el.style.backgroundColor = '#333';\n      else\n        el.style.backgroundColor = '#fff';\n    });\n\n  }\n\n  changeMode = (dataFromToolBar, buttonFromToolBar) => {\n    this.setState({ mode: dataFromToolBar, buttonTab: buttonFromToolBar });\n  }\n\n  changeColor = (dataFromToolBar) => {\n    this.setState({ color: dataFromToolBar });\n  }\n\n  changeText = (dataFromToolBar) => {\n    this.setState({ text: dataFromToolBar });\n  }\n\n  changeSizePencil = (dataFromSettings) => {\n    this.setState({ sizePencil: dataFromSettings });\n  }\n\n  changeSizeEraser = (dataFromSettings) => {\n    this.setState({ sizeEraser: dataFromSettings });\n  }\n\n  changeSizeBezier = (dataFromSettings) => {\n    this.setState({ sizeBezier: dataFromSettings });\n  }\n\n  changeBrush = (dataFromSettings) => {\n    this.setState({ brush: dataFromSettings });\n  }\n\n  changeFilter = (dataFromFilter) => {\n    this.setState({ filter: dataFromFilter });\n  }\n\n  changeShape = (dataFromSettings) => {\n    this.setState({ shape: dataFromSettings });\n  }\n\n  changeBezier = (dataFromSettings, isClicked) => {\n    this.setState({ bezier: dataFromSettings, createBezierBtnClicked: isClicked });\n  }\n\n  popCanvasOptions = () => {\n    const canvasOptions = document.querySelector('.canvas-options');\n    const back = document.querySelector('.back');\n    const navBar = document.querySelector('.nav-bar');\n\n    if (canvasOptions.style.display === 'flex') {\n      canvasOptions.style.display = 'none';\n      back.style.display = 'none';\n      navBar.style.zIndex = '1';\n    }\n    else {\n      canvasOptions.style.display = 'flex';\n      back.style.display = 'block';\n      navBar.style.zIndex = 'initial';\n    }\n  }\n\n  newFile = () => {\n    // HERE WILL BE CODE FROM INPUT TAG TO CREATE WIDTH AND HEIGHT CANVAS\n    const canvasHeightOptions = document.querySelector('#canvas-height');\n    const canvasWidthOptions = document.querySelector('#canvas-width');\n    let newFileTMP = false;\n\n    // This 3 are here because when I create new file these values must be reset\n    this.preventCenter = false;\n    this.getStage.x(0);\n    this.getStage.y(0);\n\n    if (canvasHeightOptions.value >= 32 && canvasWidthOptions.value >= 32\n      && !isNaN(canvasHeightOptions.value) && !isNaN(canvasWidthOptions.value)) {\n      const { layerManagement } = this.state;\n      const stageLayer = this.getStage.children;\n      newFileTMP = true;\n\n      stageLayer.forEach((_layer) => {\n        this.getStage.removeChildren();\n      });\n\n      this.defaultLayer = new Konva.Layer({\n        id : 'defaultLayer'\n      });\n\n      this.border = new Konva.Rect({\n        id: 'border',\n        x: 0,\n        y: 0,\n        stroke: 'black',\n        strokeWidth: 1,\n      });\n      this.defaultLayer.add(this.border);\n      this.getStage.add(this.defaultLayer);\n\n      const layers_TMP = layerManagement;\n\n      layers_TMP.forEach(_index => {\n        layers_TMP.splice(_index, layers_TMP.length);\n      });\n\n      this.setState({\n        layerManagement: layers_TMP,\n        widthFrame: canvasWidthOptions.value,\n        heightFrame: canvasHeightOptions.value,\n        newFile: true,\n      });\n\n      this.addLayer(null, canvasWidthOptions.value, canvasHeightOptions.value, newFileTMP);\n      this.popCanvasOptions();\n      this.getStage.draw();\n    } else {\n      newFileTMP = false;\n      alert('WIDTH AND HEIGHT MUST BE A NUMBER AND BIGER THEN 32PX');\n    }\n  }\n\n  addDrawingCanvas = (width, height, isImg) => {\n    const { layerManagement} = this.state;\n    const stageLayer = this.getStage.children;\n    let tmpX = 0;\n    let tmpY = 0;\n    let tmpScaleX = 0;\n    let tmpScaleY = 0;\n    // It does not allow you to center drawing \n    // place when you add a new layer\n    // let preventCenter = false;\n    if (this.getStage.x() !== 0) {\n      this.preventCenter = true;\n      tmpX = this.getStage.x();\n      tmpY = this.getStage.y();\n      tmpScaleX = this.getStage.scaleX();\n      tmpScaleY = this.getStage.scaleY();\n    }\n\n    layerManagement.forEach(_layersManagement => {\n      stageLayer.forEach((_stageLayers, i) => {\n        if (_stageLayers._id === _layersManagement.key) {\n          // This prevent multiple shape in one layer\n          // one layer have one drawing place, img place etc.\n          if (i === stageLayer.length - 1) {\n            const canvas = document.createElement('canvas');\n            canvas.width = width;\n            canvas.height = height;\n            // Center drawing place with height and width lower then stage width and hight\n            this.getStage.x((this.getStage.width() - canvas.width) / 2);\n            this.getStage.y((this.getStage.height() - canvas.height) / 2);\n            // Center drawing place with any sizePencil\n            // here i resize and scale stage u can resize layer but replace stage with l\n            if (canvas.width >= this.getStage.width() ||\n            canvas.height >= this.getStage.height()) {\n              let breaker = 0;\n              let i = 1;\n              const padding = 100;\n\n              while (this.getStage.x() <= padding ||\n              this.getStage.y() <= padding) {\n                this.getStage.scale({ x: i, y: i });\n                this.getStage.x((this.getStage.width() - (canvas.width * i)) / 2);\n                this.getStage.y((this.getStage.height() - (canvas.height * i)) / 2);\n                i = i - 0.01;\n                breaker++;\n\n                if (breaker === 100) {\n                  return;\n                }\n              }\n            }\n            this.border.width(canvas.width);\n            this.border.height(canvas.height);\n\n            // Add img to drawing place\n            // drawingPlace = img\n            let drawingPlace;\n            if (this.state.mode !== 'shape' || this.state.shape === 'none') {\n              if (isImg !== null) {\n                const imgPlace = new Konva.Image({\n                  image: isImg,\n                  x: 0,\n                  y: 0,\n                  id: 'imgPlace',\n                  width: isImg.width,\n                  height: isImg.height,\n                });\n  \n                drawingPlace = new Konva.Image({\n                  image: canvas,\n                  x: 0,\n                  y: 0,\n                  id: 'drawingPlace',\n                  width: isImg.width,\n                  height: isImg.height,\n                });\n  \n                const group = new Konva.Group({\n                  id: 'group',\n                  width: isImg.width,\n                  height: isImg.height,\n                });\n  \n                group.add(imgPlace);\n                group.add(drawingPlace);\n                _stageLayers.add(group);\n                \n              } else {\n                if (this.state.text === 'on') {\n                  this.Text.createTextArea(canvas, _stageLayers, drawingPlace, this.getStage);\n                  return;\n                }\n                if (this.state.bezier === 'create-bezier') {\n                  // this.Text.createTextArea(canvas, _stageLayers, drawingPlace, this.getStage);\n\n                  this.BezierCurve.createBezier(canvas, _stageLayers, drawingPlace, this.getStage, this.state.sizeBezier, this.state.color);\n                  return;\n                }\n                \n                drawingPlace = new Konva.Image({\n                  image: canvas,\n                  x: 0,\n                  y: 0,\n                  id: 'drawingPlace'\n                });\n  \n                _stageLayers.add(drawingPlace);\n              }\n\n              drawingPlace.on('mousedown', (event) => {\n                this.Mouse.mouseDown(event);\n              });\n\n              drawingPlace.on('mouseup', () => {\n                this.Mouse.mouseUp();\n              });\n\n              drawingPlace.on('mousemove', () => {\n                this.Mouse.mouseMove(drawingPlace);\n              });\n            } else {\n              if (this.state.shape === 'rect') \n                this.Shape.createRect(canvas, _stageLayers, drawingPlace, this.state.color);\n              else if (this.state.shape === 'star')\n                this.Shape.createStar(canvas, _stageLayers, drawingPlace, this.state.color);\n              else if (this.state.shape === 'arrow')\n                this.Shape.createArrow(canvas, _stageLayers, drawingPlace, this.state.color);\n              else if (this.state.shape === 'circle')\n                this.Shape.createCircle(canvas, _stageLayers, drawingPlace, this.state.color);\n              else if (this.state.shape === 'ellipse')\n                this.Shape.createEllipse(canvas, _stageLayers, drawingPlace, this.state.color);\n            }        \n          }\n        }\n      })\n    });\n    if (this.preventCenter === true) {\n      this.getStage.x(tmpX);\n      this.getStage.y(tmpY);\n      this.getStage.scaleX(tmpScaleX);\n      this.getStage.scaleY(tmpScaleY);\n    }\n    this.getStage.draw();\n  }\n\n  offAllButtons = () => {\n    if (this.state.mode !== 'bezier') {\n      let anchors = this.getStage.find(node => {\n        return node.className === 'Circle' && node.id() === 'anchor';\n      });\n      // if (this.saveAnchors !== undefined) {\n        //   this.saveAnchors.forEach(anchors => {\n          //     anchors.visible(false);\n          //   });\n          // }\n      anchors.forEach(node => {\n        node.visible(false);\n      });\n    }\n    this.state.bezier = 'none';\n    const el = document.querySelectorAll('img');\n    el.forEach(img => {\n      if(img.id) {\n        img.click();\n      }\n    });\n  }\n\n  addImage = () => {\n    const el = document.getElementById('add-image');\n\n    if (el.files && el.files[0]) {\n      var FR = new FileReader();\n      FR.onload = () => {\n        var img = new window.Image();\n        img.src = FR.result;\n        img.onload = () => {\n          this.addLayer(img);\n        };\n      };\n\n      FR.readAsDataURL(el.files[0]);\n      el.value = '';\n    };\n    this.offAllButtons();\n  }\n\n  downloadImg(uri, name) {\n    let link = document.createElement('a');\n    link.download = name;\n    link.href = uri;\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  }\n\n  saveImg = () => {\n    this.offAllButtons();\n    const { widthFrame, heightFrame, filterTab } = this.state;\n    const stageLayer = this.getStage.children;\n    \n    let canvas = document.createElement('canvas');\n    canvas.width = widthFrame;\n    canvas.height = heightFrame;\n    let ctx = canvas.getContext('2d');\n    ctx.filter = this.state.filter; // add filters to canvas;\n    let childrenCanvas = 0;\n    stageLayer.forEach(_layers => {\n      if (_layers.visible() === false || _layers.id() === 'defaultLayer') {\n        return;\n      }\n\n      _layers.children.forEach(_shape => {\n        if (_shape.id() === 'group' || _shape.id() === 'bezierGroup') {\n          _shape.children.forEach(_groupChildren => {\n            if (_groupChildren.id() === 'imgPlace') {\n              ctx.drawImage(_groupChildren.getImage(), _shape.x(), _shape.y());\n            } else if (_groupChildren.id() === 'drawingPlace'){\n              childrenCanvas = _groupChildren.getImage();\n              ctx.drawImage(childrenCanvas, _shape.x(), _shape.y(), _shape.width(), _shape.height());\n            } else if (_groupChildren.name() === 'shape'){\n              let x = Math.abs((_groupChildren.x() * _shape.scaleX()) + _shape.x());\n              let y = Math.abs((_groupChildren.y() * _shape.scaleY()) + _shape.y());\n              let width = _groupChildren.width() * _shape.scaleX();\n              let height = _groupChildren.height() * _shape.scaleY();\n\n              if (_groupChildren.id() === 'circle') {\n                x = x - (_groupChildren.radius() * _shape.scaleX());\n                y = y - (_groupChildren.radius() * _shape.scaleY());\n              } \n              if (_groupChildren.id() === 'ellipse') {\n                x = x - (_groupChildren.radiusX() * _shape.scaleX());\n                y = y - (_groupChildren.radiusY() * _shape.scaleY());\n              }\n              if (_groupChildren.id() === 'arrow') {\n                _groupChildren.points().forEach((point, index) => {\n                  if (index === 2) {\n                    if (point < 0) {\n                      width = width * (-1);\n                    }\n                  }\n                  if (index === 3) {\n                    if (point < 0) {\n                      height = height * (-1);\n                    }\n                  }\n                });\n              }\n              childrenCanvas = _groupChildren.toCanvas();\n              ctx.drawImage(childrenCanvas, x, y, width, height);\n            } else if (_groupChildren.id() === 'text') {\n              let x = Math.abs((_groupChildren.x() * _shape.scaleX()) + _shape.x());\n              let y = Math.abs((_groupChildren.y() * _shape.scaleY()) + _shape.y());\n              let width = _groupChildren.width() * _shape.scaleX();\n              let height = _groupChildren.height() * _shape.scaleY();\n\n              childrenCanvas = _groupChildren.toCanvas();\n              ctx.drawImage(childrenCanvas, x, y, width, height);\n            } else if (_groupChildren.id() === 'bezierImage') {\n              // let x = Math.abs(_groupChildren.x() + _shape.x());\n              // let y = Math.abs(_groupChildren.y() + _shape.y());\n              childrenCanvas = _groupChildren.getImage();\n              ctx.drawImage(childrenCanvas, _shape.x(), _shape.y(), _groupChildren.width(), _groupChildren.height());\n            }\n          });\n        } else {\n          childrenCanvas = _shape.getImage();\n          ctx.drawImage(childrenCanvas, 0, 0);\n        }\n      });\n    });\n\n    const saveGroupURL = canvas.toDataURL('image/png');\n    this.downloadImg(saveGroupURL, 'img');\n    this.setState({\n      filterTab: filterTab,\n    });\n    this.offAllButtons();\n  }\n\n  addLayer = (isImg, width, height, newFileTMP) => {\n    const { layerManagement, widthFrame, heightFrame, newFile } = this.state;\n    const stageLayer = this.stage.getStage().children;\n\n    if (newFileTMP === true || newFile === true) {\n      // Here I change all layer on false\n      stageLayer.forEach(_layers => {\n        _layers.name('yes');\n      });\n\n      layerManagement.forEach(_layers => {\n        _layers.activeLayer = 'false';\n      });\n\n      //This works when I add layer from layerManagement in application\n      if (height === undefined) {\n        width = widthFrame;\n        height = heightFrame;\n      }\n\n      let layer = new Konva.Layer({\n        id: 'newLayer',\n        name: 'no',\n        //Clip is for img to able move\n        clip: {\n          x: 0,\n          y: 0,\n          width: width,\n          height: height,\n        }\n      });\n\n      this.defaultLayer.width(width);\n      this.defaultLayer.height(height);\n\n      this.getStage.add(layer);\n      let layerTMP = layerManagement;\n\n      layerTMP.push({\n        name: layer.nodeType,\n        key: layer._id,\n        activeLayer: 'true',\n        isVisible: 'true',\n      });\n\n      this.addDrawingCanvas(width, height, isImg);\n      this.setState({\n        layerManagement: layerTMP,\n      });\n      // this.offAllButtons();\n    } else {\n      this.offAllButtons();\n      alert('YOU MUST CREATE NEW FILE FIRST');\n    }\n  }\n\n  clickLayer = (e) => {\n    const { layerManagement, buttonTab } = this.state;\n    const stageLayer = this.getStage.children;\n    let layerTMP = layerManagement;\n\n    stageLayer.forEach(_stageLayers => {\n      _stageLayers.name('yes');\n    });\n\n    layerManagement.forEach(_layers => {\n      _layers.activeLayer = 'false';\n    });\n\n    layerTMP.forEach(_layers => {\n      if (e.target.id === _layers.key.toString()) {\n        if (_layers.activeLayer === 'false') {\n          _layers.activeLayer = 'true';\n        }\n        else \n          _layers.activeLayer = 'false';\n      }\n    });\n    // WHEN I DELETE LAYER, CLICKED LAYER IS CORRECT\n    stageLayer.forEach(_layers => {\n      if (e.target.id === _layers._id.toString()) {\n        if (_layers.name() === 'no') {\n          _layers.name('yes');\n          _layers.moveToTop();\n        }\n      }\n    });\n\n    this.setState({\n      layerManagement: layerTMP,\n    });\n  }\n\n  setInvisible = (e) => {\n    const { layerManagement } = this.state;\n    const stageLayer = this.getStage.children;\n\n    layerManagement.forEach(_layersManagement => {\n      stageLayer.forEach((_layers, _index) => {\n        if (e.target.id === _layers._id.toString() && e.target.id === _layersManagement.key.toString()) {\n          if (_index >= 1) {\n            if (_layers.visible() === false)\n              _layers.visible(true);\n            else\n              _layers.visible(false);\n          } else {\n            alert('You can not turn off last layer');\n          }\n        }\n      });\n    });\n\n\n      layerManagement.forEach((_layers, _index) => {\n        if (e.target.id === _layers.key.toString()) {\n          if (_index >= 1) {\n            if (_layers.isVisible === 'true')\n              _layers.isVisible = 'false';\n            else\n              _layers.isVisible = 'true';\n          }\n        }\n      });\n\n    this.getStage.draw();\n  }\n\n  removeLayer = () => {\n    const { layerManagement } = this.state;\n    const stageLayer = this.getStage.children;\n    let layerTMP = layerManagement;\n    \n    layerTMP.forEach((_layersManagement, _index) => {\n      if (layerManagement.length === 1) {\n        alert('You can not delete last layer');\n        return;\n      }\n      if (_layersManagement.activeLayer === 'true') {\n        stageLayer.forEach(_stageLayers => {\n          if (_stageLayers._id === _layersManagement.key) {\n            _stageLayers.getLayer().remove();\n          }\n        });\n\n        layerTMP.splice(_index, 1);\n      }\n    });\n\n    // Set true on last element \n    layerTMP.forEach((_layersManagement, _index) => {\n      if (layerManagement.length - 1 === _index) {\n        _layersManagement.activeLayer = 'true';\n      }\n    });\n    \n    this.setState({\n      layerManagement: layerTMP,\n    });\n  }\n\n  displayLayer = () => {\n    const { layerManagement } = this.state;\n    let layerTMP = layerManagement;\n    const stageLayer = this.getStage.children;\n\n    stageLayer.forEach(_layers => {\n      if (_layers.id() === 'defaultLayer') {\n        return;\n      }\n\n      layerTMP.push({\n        name: _layers.nodeType,\n        key: _layers._id,\n        activeLayer: 'false',\n      });\n    });\n\n    this.setState({\n      layerManagement: layerTMP,\n    });\n  }\n\n  moveLayerUpOrBottom = (buttonUpClick) => {\n    const stageLayer = this.getStage.children;\n    const { layerManagement } = this.state;\n    let tmpLayerManagement = layerManagement;\n    let preventMoveToTheBottom = false;\n    Array.prototype.move = function (from, to) {\n      this.splice(to, 0, this.splice(from, 1)[0]);\n    }\n\n    layerManagement.forEach((_layersManagement, _index) => {\n      stageLayer.forEach(_stageLayers => {\n        if (_stageLayers._id === _layersManagement.key) {\n          if (_layersManagement.activeLayer === 'true') {\n            if (buttonUpClick === true && _index >= 1) {\n              tmpLayerManagement.move(_index, _index - 1);\n              _stageLayers.moveDown();\n            } else {\n              if (preventMoveToTheBottom === false) {\n                if (_index === 1) {\n                  _stageLayers.visible(true);\n                  _layersManagement.isVisible = 'true';\n                }\n                tmpLayerManagement.move(_index, _index + 1);\n                _stageLayers.moveUp();\n                preventMoveToTheBottom = true;\n              }\n            }\n          }\n        }\n      });\n    });\n    \n    // First layer must be always visible \n    layerManagement.forEach((_layersManagement, _index) => {\n      stageLayer.forEach(_stageLayers => {\n        if (_stageLayers.index === 0) {\n          if (_stageLayers._id === _layersManagement.key) {\n            _stageLayers.visible(true);\n            _layersManagement.isVisible = 'true';\n          }\n        }\n      });\n    });\n\n    this.setState({\n      layerManagement: tmpLayerManagement,\n    });\n  }\n  \n  returnStage = () => {\n    return this.getStage;\n  }\n\n  returnLayerManagement = () => {\n    return this.state.layerManagement;\n  }\n\n  returnStateBezier = () => {\n    return this.state.bezier;\n  }\n\n  render() {\n    this.buttonUpClick = false;\n    return (\n      <div className='react-app'>\n        <div className='mouseCircle'></div>\n        <div className='back'></div>\n          <Header clearDrawingPlace={this.clearDrawingPlace}\n            addImage={this.addImage}\n            clearAll={this.clearAll}\n            saveImg={this.saveImg}\n            add={this.newFile}\n            popCanvasOptions={this.popCanvasOptions}\n          />\n\n          <main>\n            <div className='layer-management' \n              onMouseMove={(event) => { this.Mouse.dragLayerManagement('.layer-management', event) }}>\n              <ul>\n                {\n                  this.state.layerManagement.map((_layers, index) => {\n                    return (\n                      <div>\n                        <li id={_layers.key}\n                          key={_layers.key}\n                          name={_layers.activeLayer}\n                          onMouseDown={(e) => { this.offAllButtons(); this.clickLayer(e); }}\n                        >\n                          <div className={'invisible-btn'}\n                            id={_layers.key} \n                            name={_layers.isVisible}\n                            onMouseDown={(e) => { this.offAllButtons(); this.setInvisible(e); }}>\n                              o\n                          </div>\n                          {index} {_layers.name} {_layers.key}\n                        </li>\n                      </div>\n                    )\n                  })\n                }\n              </ul>\n              <div className={'options'}>\n                <div className='move-options'>\n                  <button className='layer-management-options-btn up-btn'\n                    onMouseDown={() => { \n                      this.buttonUpClick = true;\n                      this.moveLayerUpOrBottom(this.buttonUpClick);\n                      this.offAllButtons();\n                     }}>/\\</button>\n                  <button className='layer-management-options-btn down-btn'\n                    onMouseDown={() => {\n                      this.buttonUpClick = false;\n                      this.moveLayerUpOrBottom(this.buttonUpClick);\n                      this.offAllButtons();\n                     }}>\\/</button>\n                </div>\n                <button className='layer-management-options-btn add-btn'\n                onClick={() => { this.offAllButtons(); this.addLayer(null); }}>add</button>\n                <button className='layer-management-options-btn remove-btn'\n                onClick={() => { this.offAllButtons(); this.removeLayer() }}>remove</button>\n              </div>\n            </div>\n            <ToolBar mode={this.changeMode}\n              color={this.changeColor}\n              ref={node => { this.tob = node }}\n              returnStage={this.returnStage}\n              returnStateBezier={this.returnStateBezier}\n              returnLayerManagement={this.returnLayerManagement}\n              offAllButtons={this.offAllButtons}\n              text={this.changeText}\n            />\n            <Settings changeSizePencil={this.changeSizePencil}\n              changeSizeEraser={this.changeSizeEraser}\n              changeSizeBezier={this.changeSizeBezier}\n              mode={this.state.mode}\n              color={this.state.color}\n              changeColor={this.changeColor}\n              changeFilter={this.changeFilter}\n              changeBrush={this.changeBrush}\n              changeShape={this.changeShape}\n              changeBezier={this.changeBezier}\n              returnStage={this.returnStage}\n            />\n            <Stage className={'drawing-place stage'}\n              width={window.innerWidth}\n              height={window.innerHeight - 100 - 13}\n              onMouseMove={(e) => { this.Mouse.mouseCircle(e) }}\n              ref={node => { this.stage = node }}\n              fill={'red'}\n            >\n            </Stage>\n          </main>\n\n          <footer>\n            <div className='footer-wrapper wrapper'>\n              Soon there will be a footer here !\n            </div>\n          </footer>\n      </div>\n    );\n  }\n}","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport default function register() {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Lets check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App.jsx';\nimport registerServiceWorker from './registerServiceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\nregisterServiceWorker();\n"],"sourceRoot":""}