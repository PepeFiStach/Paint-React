(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,function(e,t,a){e.exports=a.p+"static/media/pencil.c3992041.jpg"},function(e,t,a){e.exports=a.p+"static/media/move.b10cd0bb.jpg"},function(e,t,a){e.exports=a.p+"static/media/pencil-white.09f9d692.png"},function(e,t,a){e.exports=a.p+"static/media/ruber.1fdf0851.png"},function(e,t,a){e.exports=a.p+"static/media/move-white.329c531d.jpg"},function(e,t,a){e.exports=a.p+"static/media/ruber-white.8c702c16.png"},,,,function(e,t,a){e.exports=a.p+"static/media/color-wheel.0fc36b2a.png"},function(e,t,a){e.exports=a(34)},,,,,function(e,t,a){},,function(e,t,a){},,,,,,,,,,function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),o=a(14),r=a.n(o),s=(a(22),a(1)),l=a(6),c=a(3),u=a(2),d=a(4),h=(a(24),a(15)),m=a(5),g=a.n(m),f=a(10),v=a.n(f),p=a(12),w=a.n(p),y=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).getPosition=function(e){a.lastPointerPositionTemp=e},a.startPainting=function(e,t,n,i,o,r,s,l,c){if(e){var u=e.getImage().getContext("2d"),d=document.querySelectorAll(".brush-list option");if("pencil"===n)u.lineWidth=s,u.globalCompositeOperation="source-over";else{if("eraser"!==n)return;u.lineWidth=c,u.lineJoin="round",u.lineCap="round",u.shadowBlur=null,u.shadowColor=null,u.globalCompositeOperation="destination-out"}d.forEach(function(e,t){e.value===l&&(document.querySelector(".brush-list").selectedIndex=t)}),u.strokeStyle=r,u.beginPath();var h,m,g,f,v,p,w=i.find("Group"),y=i.find("Layer");void 0===w[0]||!1===o?(h=0,m=0,g=1,f=1,v=1,p=1):(h=e.parent.x()*i.scaleX(),m=e.parent.y()*i.scaleY(),g=e.parent.scaleX(),f=e.parent.scaleY(),v=e.parent.parent.clipWidth()/e.parent.width(),p=e.parent.parent.clipHeight()/e.parent.height());var b={x:(a.lastPointerPositionTemp.x-t.x()-y[0].x()-i.x()-h)*v/i.scaleX()/g,y:(a.lastPointerPositionTemp.y-t.y()-y[0].y()-i.y()-m)*p/i.scaleY()/f};"spray"===l&&"eraser"!==n||u.moveTo(b.x,b.y);var S=i.getPointerPosition();if(b={x:(S.x-t.x()-y[0].x()-i.x()-h)*v/i.scaleX()/g,y:(S.y-t.y()-y[0].y()-i.y()-m)*p/i.scaleY()/f},a.localPositionTMP={x:b.x,y:b.y},"eraser"!==n)switch(l){case"default":u.lineJoin="round",u.lineCap="round",u.shadowBlur=null,u.shadowColor=null;break;case"shadow":u.lineJoin="round",u.lineCap="round",u.shadowBlur=s,u.shadowColor=r;break;case"thick-brush":u.shadowBlur=null,u.shadowColor=null,u.lineJoin="miter",u.lineCap="butt";break;case"spray":for(var E=function(e,t){return Math.random()*(t-e)+e},C=50;C--;){var x=E(0,2*Math.PI),k=E(0,s);u.fillStyle=r,u.fillRect(b.x+k*Math.cos(x),b.y+k*Math.sin(x),1,1)}break;default:alert("Brush is undefined")}"spray"===l&&"eraser"!==n||(u.lineTo(b.x,b.y),u.closePath(),u.stroke()),a.lastPointerPositionTemp=S,i.draw()}},a.retutnLocalPos=function(){},a.lastPointerPositionTemp=0,a.localPositionTMP={},a}return Object(d.a)(t,e),t}(i.a.Component),b=function(e){function t(e,a,n,i,o,r,l,d,h){var m;return Object(s.a)(this,t),(m=Object(c.a)(this,Object(u.a)(t).call(this,e))).scroll=function(e,t){var a=Math.round(100*m.stage.width())/100;if(e.target.style.width===a.toString()+"px"){var n=m.stage.scaleX(),i={x:m.stage.getPointerPosition().x/n-m.stage.x()/n,y:m.stage.getPointerPosition().y/n-m.stage.y()/n},o=e.deltaY<0?n*t:n/t;m.stage.scale({x:o,y:o});var r={x:-(i.x-m.stage.getPointerPosition().x/o)*o,y:-(i.y-m.stage.getPointerPosition().y/o)*o};m.stage.position(r);var s=m.stage.find("Transformer");s.lenght>0&&s[0].anchorSize(10+m.stage.scaleX()),m.stage.draw()}},m.mouseUp=function(){m.state.isDrawing=!1,m.state.isMouseOnCanvas=!1},m.mouseDown=function(e){0===e.evt.button&&(m.state.isDrawing=!0,m.state.isMouseOnCanvas=!0,m.state.lastPointerPosition=m.stage.getPointerPosition(),m.Paint.getPosition(m.state.lastPointerPosition))},m.mouseMove=function(e){var t,a=m.appState.layerManagement,n=m.stage.children;a.forEach(function(a){n.forEach(function(n){if("true"===a.activeLayer){var i=m.state.isDrawing,o=m.stage;if(!i)return;a.key===n._id&&n.children.forEach(function(a){"drawingPlace"===a.id()&&(t=!1,m.Paint.startPainting(a,e,m.mode,o,t,m.color,m.sizePencil,m.brush,m.sizeEraser)),"group"===a.id()&&(t=!0,m.Paint.startPainting(a.children[1],e,m.mode,o,t,m.color,m.sizePencil,m.brush,m.sizeEraser))})}})})},m.dragGroup=function(){var e=m.appState.layerManagement,t=m.stage.children;e.forEach(function(e){t.forEach(function(t){"true"===e.activeLayer&&e.key===t._id&&t.children.forEach(function(e){if("group"===e.id()&&"move"===m.mode){var t=m.stage.getPointerPosition().x-m.stage.x(),a=m.stage.getPointerPosition().y-m.stage.y();e.x(t/m.stage.scaleX()),e.y(a/m.stage.scaleY()),m.stage.draw()}})})})},m.preventMouseOverCanvas=function(e){void 0===e.target.className&&(m.state.isDrawing=!1)},m.mouseCircle=function(e){m.preventMouseOverCanvas(e);var t=document.querySelector(".mouseCircle");if("no-"!==m.mode.substr(0,3)&&"default"!==m.mode){var a;"pencil"===m.mode?a=m.sizePencil:"eraser"===m.mode&&(a=m.sizeEraser);var n=parseInt(window.getComputedStyle(t).width,10),i=parseInt(window.getComputedStyle(t).height,10),o=m.stage.getPointerPosition().x,r=m.stage.getPointerPosition().y;t.style.left=o-n/2+"px",t.style.top=r+80-i/2+"px",t.style.width=a*m.stage.scaleX()+"px",t.style.height=a*m.stage.scaleY()+"px","pencil"===m.mode?t.style.backgroundColor=m.color:"eraser"===m.mode&&(t.style.backgroundColor="#fff")}else t.style.display="none"},m.dragLayerManagement=function(e){var t=document.querySelector(e),a=0,n=0,i=0,o=0;document.querySelector(e)?document.querySelector(e).addEventListener("mousedown",function(e){2===e.button&&w(e)}):t.oncontextmenu=w;var r=document.querySelector(".nav-bar"),s=document.querySelector("footer"),l=parseInt(window.getComputedStyle(t).left,10),c=parseInt(window.getComputedStyle(t).top,10),u=parseInt(window.getComputedStyle(t).width,10),d=parseInt(window.getComputedStyle(t).height,10),h=parseInt(window.getComputedStyle(r).height,10),m=parseInt(window.getComputedStyle(s).height,10);if(l+u>window.innerWidth-5){document.onmouseup=null,document.onmousemove=null;var g=l+u-(window.innerWidth-5);t.style.left=l-g+"px"}else if(c+d>window.innerHeight-m-5){document.onmouseup=null,document.onmousemove=null;var f=c-d+(window.innerHeight-m-5);t.style.top=f-(c-d)-d+"px"}else if(l<5){document.onmouseup=null,document.onmousemove=null;var v=l-window.innerWidth-5;t.style.left=l-(v+window.innerWidth)+"px"}else if(c<h+5){document.onmouseup=null,document.onmousemove=null;var p=c-h-5;t.style.top=c-h-5-(p-h-5)+"px"}function w(e){(e=e||window.event).preventDefault(),i=e.clientX,o=e.clientY,document.onmouseup=b,document.onmousemove=y}function y(e){(e=e||window.event).preventDefault(),a=i-e.clientX,n=o-e.clientY,i=e.clientX,o=e.clientY,t.style.top=t.offsetTop-n+"px",t.style.left=t.offsetLeft-a+"px"}function b(){document.onmouseup=null,document.onmousemove=null}},m.resizeElement=function(e,t){var a=document.querySelector(e),n=document.querySelector(t);function i(e){(e=e||window.event).preventDefault(),document.onmouseup=r,document.onmousemove=o}function o(e){(e=e||window.event).preventDefault(),n.style.width=e.clientX-n.offsetLeft+"px",n.style.height=e.clientY-n.offsetTop+"px"}function r(){document.onmouseup=null,document.onmousemove=null}document.querySelector(e)?document.querySelector(e).onmousedown=i:a.onmousedown=i},m.stage=a,m.appState=n,m.mode=i,m.color=o,m.sizePencil=r,m.brush=l,m.sizeEraser=d,m.shape=h,m.state={isDrawing:!1,isMouseOnCanvas:!1,lastPointerPosition:0},m.Paint=new y(e),m}return Object(d.a)(t,e),t}(i.a.Component),S=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).off=function(){var e=new window.Image;e.width=32,e.height=32,e.src=v.a,a.state.mode="no-eraser",a.state.stateClick=!1,e.onload=function(){a.setState({image:e,stateClick:!1,mode:"no-eraser"})}},a.mouseClick=function(){var e=a.state.stateClick;a.props.offAllButtons();var t=document.querySelector(".eraser-img");if(e){var n=new window.Image;n.width=32,n.height=32,n.src=v.a,a.state.mode="no-eraser",t.removeAttribute("id"),a.state.stateClick=!1,n.onload=function(){a.setState({image:n,stateClick:!1,mode:"no-eraser"})}}else{var i=new window.Image;i.width=32,i.height=32,i.src=w.a,a.state.mode="eraser",t.id="eraser-id",a.state.stateClick=!0,i.onload=function(){a.setState({image:i,stateClick:!0,mode:"eraser"})}}a.props.changeMode(a.state.mode)},a.state={image:null,stateClick:!1,mode:"eraser",name:"eraser"},a.Mouse=new b,a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=new window.Image;t.src=v.a,t.width=32,t.height=32,t.onload=function(){e.setState({image:t})}}},{key:"render",value:function(){var e,t=this,a=this.state.image;return e=null===a?i.a.createElement("img",null):i.a.createElement("div",{className:"eraser",onMouseMove:function(){t.Mouse.dragLayerManagement(".eraser")},onClick:this.mouseClick},i.a.createElement("img",{src:a.src,width:a.width,height:a.height,className:"eraser-img"}),i.a.createElement("div",{className:"eraser-resize",onMouseMove:function(){t.Mouse.resizeElement(".eraser-resize",".eraser")}})),i.a.createElement("div",null,e)}}]),t}(i.a.Component),E=a(7),C=a.n(E),x=a(9),k=a.n(x),M=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).off=function(){var e=new window.Image;e.width=32,e.height=32,e.src=C.a,a.state.mode="no-pencil",a.state.stateClick=!1,e.onload=function(){a.setState({image:e,stateClick:!1,mode:"no-pencil"})}},a.mouseClick=function(){var e=a.state.stateClick;a.props.offAllButtons();var t=document.querySelector(".pencil-img");if(e){var n=new window.Image;n.width=32,n.height=32,n.src=C.a,a.state.mode="no-pencil",t.removeAttribute("id"),a.state.stateClick=!1,n.onload=function(){a.setState({image:n,stateClick:!1,mode:"no-pencil"})}}else{var i=new window.Image;i.width=32,i.height=32,i.src=k.a,a.state.mode="pencil",t.id="pencil-id",a.state.stateClick=!0,i.onload=function(){a.setState({image:i,stateClick:!0,mode:"pencil"})}}a.props.changeMode(a.state.mode)},a.state={image:null,stateClick:!1,mode:"pencil",name:"pencil"},a.Mouse=new b,a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=new window.Image;t.src=C.a,t.width=32,t.height=32,t.onload=function(){e.setState({image:t})}}},{key:"render",value:function(){var e,t=this,a=this.state.image;return e=null===a?i.a.createElement("img",{ref:function(e){t.pencil=e},className:"pencil"}):i.a.createElement("div",{className:"pencil",onMouseMove:function(){t.Mouse.dragLayerManagement(".pencil")},onClick:this.mouseClick},i.a.createElement("img",{src:a.src,width:a.width,height:a.height,className:"pencil-img"}),i.a.createElement("div",{className:"pencil-resize",onMouseMove:function(){t.Mouse.resizeElement(".pencil-resize",".pencil")}})),i.a.createElement("div",null,e)}}]),t}(i.a.Component),z=a(8),B=a.n(z),P=a(11),I=a.n(P),L=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).off=function(){var e=new window.Image;e.width=32,e.height=32,e.src=B.a,a.state.mode="no-move",a.state.stateClick=!1,e.onload=function(){a.setState({image:e,stateClick:!1,mode:"no-move"})}},a.mouseClick=function(){var e=a.state.stateClick;a.props.offAllButtons();var t=document.querySelector(".move-img");if(e){var n=new window.Image;n.width=32,n.height=32,n.src=B.a,a.state.mode="no-move",t.removeAttribute("id"),a.state.stateClick=!1,n.onload=function(){a.setState({image:n,stateClick:!1,mode:"no-move"})}}else{var i=new window.Image;i.width=32,i.height=32,i.src=I.a,a.state.mode="move",t.id="move-id",a.state.stateClick=!0,i.onload=function(){a.setState({image:i,stateClick:!0,mode:"move"})}}a.props.changeMode(a.state.mode)},a.state={image:null,stateClick:!1,mode:"move",name:"move"},a.Mouse=new b,a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=new window.Image;t.src=B.a,t.width=32,t.height=32,t.onload=function(){e.setState({image:t})}}},{key:"render",value:function(){var e,t=this,a=this.state.image;return e=null===a?i.a.createElement("img",{ref:function(e){t.pencil=e}}):i.a.createElement("div",{className:"move",onMouseMove:function(){t.Mouse.dragLayerManagement(".move")},onClick:this.mouseClick},i.a.createElement("img",{src:a.src,width:a.width,height:a.height,className:"move-img"}),i.a.createElement("div",{className:"move-resize",onMouseMove:function(){t.Mouse.resizeElement(".move-resize",".move")}})),i.a.createElement("div",null,e)}}]),t}(i.a.Component),O=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).off=function(){var e=new window.Image;e.width=32,e.height=32,e.src=B.a,a.state.mode="no-filter",a.state.stateClick=!1,e.onload=function(){a.setState({image:e,stateClick:!1,mode:"no-filter"})}},a.mouseClick=function(){var e=a.state.stateClick;a.props.offAllButtons();var t=document.querySelector(".filter-img");if(e){var n=new window.Image;n.width=32,n.height=32,n.src=B.a,a.state.mode="no-filter",t.removeAttribute("id"),a.state.stateClick=!1,n.onload=function(){a.setState({image:n,stateClick:!1,mode:"no-filter"})}}else{var i=new window.Image;i.width=32,i.height=32,i.src=I.a,a.state.mode="filter",t.id="filter-id",a.state.stateClick=!0,i.onload=function(){a.setState({image:i,stateClick:!0,mode:"filter"})}}a.props.changeMode(a.state.mode)},a.state={image:null,stateClick:!1,mode:"filter",name:"filter"},a.Mouse=new b,a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=new window.Image;t.src=B.a,t.width=32,t.height=32,t.onload=function(){e.setState({image:t})}}},{key:"render",value:function(){var e,t=this,a=this.state.image;return e=null===a?i.a.createElement("img",null):i.a.createElement("div",{className:"filter",onMouseMove:function(){t.Mouse.dragLayerManagement(".filter")},onClick:this.mouseClick},i.a.createElement("img",{src:a.src,width:a.width,height:a.height,className:"filter-img"}),i.a.createElement("div",{className:"filter-resize",onMouseMove:function(){t.Mouse.resizeElement(".filter-resize",".filter")}})),i.a.createElement("div",null,e)}}]),t}(i.a.Component),A=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).off=function(){var e=new window.Image;e.width=32,e.height=32,e.src=C.a,a.state.mode="no-resize",a.state.stateClick=!1,e.onload=function(){a.setState({image:e,stateClick:!1,mode:"no-resize"})}},a.mouseClick=function(){var e=a.state.stateClick;a.props.offAllButtons();var t=document.querySelector(".resize-img");if(e){var n=new window.Image;n.width=32,n.height=32,n.src=C.a,a.state.mode="no-resize",t.removeAttribute("id"),a.state.stateClick=!1,n.onload=function(){a.setState({image:n,stateClick:!1,mode:"no-resize"})}}else{var i=new window.Image;i.width=32,i.height=32,i.src=k.a,a.state.mode="resize",t.id="resize-id",a.state.stateClick=!0,i.onload=function(){a.setState({image:i,stateClick:!0,mode:"resize"})}}a.props.changeMode(a.state.mode),a.addResize()},a.addResize=function(){var e=a.props.returnLayerManagement(),t=a.props.returnStage().children,n=document.querySelector(".resize-img");e.forEach(function(e){t.forEach(function(i){if("true"===e.activeLayer&&e.key===i._id){var o=new g.a.Transformer({id:"transformer",rotateEnabled:!1});i.children.forEach(function(e){if("group"===e.id())if("resize"===a.state.mode){if("Rect"!==e.children[0].className&&"Star"!==e.children[0].className&&"Arrow"!==e.children[0].className&&"Circle"!==e.children[0].className&&"Ellipse"!==e.children[0].className||o.rotateEnabled(!0),a.preventMultipleFor2){a.currentIndex=i.index,t.forEach(function(e){a.lastIndex=e.index}),i.moveToTop();var r=e.parent;o.attachTo(e),r.add(o),a.props.returnStage().find("Transformer")[0].anchorSize(10+a.props.returnStage().scaleX()),n.click(),n.click(),a.props.returnStage().draw(),a.preventMultipleFor2=!1}}else if("no-resize"===a.state.mode&&a.preventMultipleFor3){var s=e.parent,l=e.parent.children[0];s.removeChildren(),s.add(l),a.props.returnStage().draw();for(var c=0;c<a.lastIndex-a.currentIndex;c++)i.moveDown();a.preventMultipleFor3=!1}})}})})},a.state={image:null,stateClick:!1,mode:"resize",name:"resize"},a.Mouse=new b,a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(){this.preventMultipleFor2=!0,this.preventMultipleFor3=!0}},{key:"componentDidMount",value:function(){var e=this;this.lastIndex=0,this.currentIndex=0;var t=new window.Image;t.src=C.a,t.width=32,t.height=32,t.onload=function(){e.setState({image:t})}}},{key:"render",value:function(){var e,t=this,a=this.state.image;return e=null===a?i.a.createElement("img",{ref:function(e){t.resize=e},className:"resize"}):i.a.createElement("div",{className:"resize",onMouseMove:function(){t.Mouse.dragLayerManagement(".resize")},onClick:this.mouseClick},i.a.createElement("img",{src:a.src,width:a.width,height:a.height,className:"resize-img"}),i.a.createElement("div",{className:"resize-resize",onMouseMove:function(){t.Mouse.resizeElement(".resize-resize",".resize")}})),i.a.createElement("div",null,e)}}]),t}(i.a.Component),N=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).off=function(){var e=new window.Image;e.width=32,e.height=32,e.src=C.a,a.state.mode="no-shape",a.state.stateClick=!1,e.onload=function(){a.setState({image:e,stateClick:!1,mode:"no-shape"})}},a.createRect=function(e,t,n,i){a.shapeDrawingPlace=n;var o=new g.a.Rect({id:"rect",fill:i,name:"shape"}),r=new g.a.Group({id:"group"});r.add(o),t.add(r)},a.createStar=function(e,t,a,n){var i=new g.a.Star({x:-9999,y:-9999,numPoints:5,innerRadius:e.width/4,outerRadius:e.width/4,id:"star",fill:n,name:"shape"}),o=new g.a.Group({id:"group"});o.add(i),t.add(o)},a.createArrow=function(e,t,a,n){var i=new g.a.Arrow({pointerLength:20,pointerWidth:20,id:"arrow",fill:n,stroke:n,strokeWidth:4,name:"shape"}),o=new g.a.Group({id:"group"});o.add(i),t.add(o)},a.createCircle=function(e,t,a,n){var i=new g.a.Circle({x:-9999,y:-9999,radius:70,id:"circle",fill:n,stroke:n,strokeWidth:4,name:"shape"}),o=new g.a.Group({id:"group"});o.add(i),t.add(o)},a.createEllipse=function(e,t,a,n){var i=new g.a.Ellipse({x:-9999,y:-9999,radius:{x:100,y:50},id:"ellipse",fill:n,stroke:n,strokeWidth:4,name:"shape"}),o=new g.a.Group({id:"group"});o.add(i),t.add(o)},a.retutnShapeDrawingPlace=function(){return a.shapeDrawingPlace},a.mouseClick=function(){var e=a.state.stateClick;a.props.offAllButtons();var t=document.querySelector(".shape-img");if(e){var n=new window.Image;n.width=32,n.height=32,n.src=C.a,a.state.mode="no-shape",t.removeAttribute("id"),a.state.stateClick=!1,n.onload=function(){a.setState({image:n,stateClick:!1,mode:"no-shape"})}}else{var i=new window.Image;i.width=32,i.height=32,i.src=k.a,a.state.mode="shape",t.id="shape-id",a.state.stateClick=!0,i.onload=function(){a.setState({image:i,stateClick:!0,mode:"shape"})}}a.props.changeMode(a.state.mode)},a.state={image:null,stateClick:!1,mode:"shape",name:"shape"},a.Mouse=new b,a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.shapeDrawingPlace=0;var t=new window.Image;t.src=C.a,t.width=32,t.height=32,t.onload=function(){e.setState({image:t})}}},{key:"render",value:function(){var e,t=this,a=this.state.image;return e=null===a?i.a.createElement("img",{ref:function(e){t.shape=e},className:"shape"}):i.a.createElement("div",{className:"shape",onMouseMove:function(){t.Mouse.dragLayerManagement(".shape")},onClick:this.mouseClick},i.a.createElement("img",{src:a.src,width:a.width,height:a.height,className:"shape-img"}),i.a.createElement("div",{className:"shape-resize",onMouseMove:function(){t.Mouse.resizeElement(".shape-resize",".shape")}})),i.a.createElement("div",null,e)}}]),t}(i.a.Component),j=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).off=function(){var e=new window.Image;e.width=32,e.height=32,e.src=C.a,a.state.mode="no-text",a.state.stateClick=!1,e.onload=function(){a.setState({image:e,stateClick:!1,mode:"no-text"})}},a.createTextArea=function(e,t,a,n){var i=new g.a.Text({id:"text",fontSize:20}),o=new g.a.Group({id:"group"});o.add(i),t.add(o),i.on("dblclick",function(){var e=i.getAbsolutePosition(),t=n.getContainer().getBoundingClientRect(),a=e.x+t.left,o=e.y+t.top,r=document.createElement("textarea");document.body.appendChild(r),r.value=i.text(),r.style.position="absolute",r.style.top=o+"px",r.style.left=a+"px",r.style.width=i.width(),r.focus(),r.addEventListener("keydown",function(e){13===e.keyCode&&(i.text(r.value),n.draw(),document.body.removeChild(r))})})},a.mouseClick=function(){var e=a.state.stateClick;a.props.offAllButtons();var t=document.querySelector(".text-img");if(e){var n=new window.Image;n.width=32,n.height=32,n.src=C.a,a.state.mode="no-text",t.removeAttribute("id"),a.state.stateClick=!1,a.props.changeText("off"),n.onload=function(){a.setState({image:n,stateClick:!1,mode:"no-text"})}}else{var i=new window.Image;i.width=32,i.height=32,i.src=k.a,a.state.mode="text",t.id="text-id",a.state.stateClick=!0,a.props.changeText("on"),i.onload=function(){a.setState({image:i,stateClick:!0,mode:"text"})}}a.props.changeMode(a.state.mode)},a.state={image:null,stateClick:!1,mode:"text",name:"text"},a.Mouse=new b,a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=new window.Image;t.src=C.a,t.width=32,t.height=32,t.onload=function(){e.setState({image:t})}}},{key:"render",value:function(){var e,t=this,a=this.state.image;return e=null===a?i.a.createElement("img",{ref:function(e){t.text=e},className:"text"}):i.a.createElement("div",{className:"text",onMouseMove:function(){t.Mouse.dragLayerManagement(".text")},onClick:this.mouseClick},i.a.createElement("img",{src:a.src,width:a.width,height:a.height,className:"text-img"}),i.a.createElement("div",{className:"text-resize",onMouseMove:function(){t.Mouse.resizeElement(".text-resize",".text")}})),i.a.createElement("div",null,e)}}]),t}(i.a.Component),F=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).off=function(){var e=new window.Image;e.width=32,e.height=32,e.src=v.a,a.state.mode="no-bucket",a.state.stateClick=!1,e.onload=function(){a.setState({image:e,stateClick:!1,mode:"no-bucket"})}},a.mouseClick=function(){var e=a.state.stateClick;a.props.offAllButtons();var t=document.querySelector(".bucket-img");if(e){var n=new window.Image;n.width=32,n.height=32,n.src=v.a,a.state.mode="no-bucket",t.removeAttribute("id"),a.state.stateClick=!1,n.onload=function(){a.setState({image:n,stateClick:!1,mode:"no-bucket"})}}else{var i=new window.Image;i.width=32,i.height=32,i.src=w.a,a.state.mode="bucket",t.id="bucket-id",a.state.stateClick=!0,i.onload=function(){a.setState({image:i,stateClick:!0,mode:"bucket"})}}a.props.changeMode(a.state.mode)},a.state={image:null,stateClick:!1,mode:"bucket",name:"bucket"},a.Mouse=new b,a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=new window.Image;t.src=v.a,t.width=32,t.height=32,t.onload=function(){e.setState({image:t})}}},{key:"render",value:function(){var e,t=this,a=this.state.image;return e=null===a?i.a.createElement("img",null):i.a.createElement("div",{className:"bucket",onMouseMove:function(){t.Mouse.dragLayerManagement(".bucket")},onClick:this.mouseClick},i.a.createElement("img",{src:a.src,width:a.width,height:a.height,className:"bucket-img"}),i.a.createElement("div",{className:"bucket-resize",onMouseMove:function(){t.Mouse.resizeElement(".bucket-resize",".bucket")}})),i.a.createElement("div",null,e)}}]),t}(i.a.Component),T=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).off=function(){var e=new window.Image;e.width=32,e.height=32,e.src=B.a,a.state.mode="no-bezier",a.state.stateClick=!1,e.onload=function(){a.setState({image:e,stateClick:!1,mode:"no-bezier"})}},a.modifyBezier=function(){},a.createBezier=function(e,t,a,n,i,o){var r=e.getContext("2d");r.lineWidth=i,console.log(i),r.globalCompositeOperation="source-over",r.strokeStyle=o;var s=new g.a.Image({image:e,id:"bezierImage",width:e.width,height:e.height,x:0,y:0,visible:!0}),l=new g.a.Group({id:"bezierGroup"});l.add(s),t.add(l),n.draw()},a.createAnchor=function(e,t,a){var n=new g.a.Circle({x:e,y:t,radius:20,stroke:"#666",fill:"#ddd",strokeWidth:2,draggable:!0,id:"anchor"});a.find("#bezierGroup")[0].add(n),a.draw()},a.mouseClick=function(){var e=a.state.stateClick;a.props.offAllButtons();var t=document.querySelector(".bezier-img");if(e){var n=new window.Image;n.width=32,n.height=32,n.src=B.a,a.state.mode="no-bezier",t.removeAttribute("id"),a.state.stateClick=!1,n.onload=function(){a.setState({image:n,stateClick:!1,mode:"no-bezier"})}}else{var i=new window.Image;i.width=32,i.height=32,i.src=I.a,a.state.mode="bezier",t.id="bezier-id",a.state.stateClick=!0,i.onload=function(){a.setState({image:i,stateClick:!0,mode:"bezier"})}}a.props.changeMode(a.state.mode)},a.state={image:null,stateClick:!1,mode:"bezier",name:"bezier"},a.Mouse=new b,a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=new window.Image;t.src=B.a,t.width=32,t.height=32,t.onload=function(){e.setState({image:t})}}},{key:"render",value:function(){var e,t=this,a=this.state.image;return e=null===a?i.a.createElement("img",{ref:function(e){t.pencil=e}}):i.a.createElement("div",{className:"bezier",onMouseMove:function(){t.Mouse.dragLayerManagement(".bezier")},onClick:this.mouseClick},i.a.createElement("img",{src:a.src,width:a.width,height:a.height,className:"bezier-img"}),i.a.createElement("div",{className:"bezier-resize",onMouseMove:function(){t.Mouse.resizeElement(".bezier-resize",".bezier")}})),i.a.createElement("div",null,e)}}]),t}(i.a.Component),D=a(16),R=a.n(D),G=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).mouseMove=function(e){var t=a.state.context,n=e.nativeEvent.clientX,i=e.nativeEvent.clientY,o={x:n-parseInt(window.getComputedStyle(a.canvas).left,10),y:i-parseInt(window.getComputedStyle(a.canvas).top,10)},r=t.getImageData(o.x,o.y,1,1).data;a.setState({pixel:r}),a.Mouse.dragLayerManagement(".colorPallete")},a.mosueClick=function(){var e=a.state.pixel,t={R:e[0],G:e[1],B:e[2],A:e[3]},n="rgba(".concat(t.R,",").concat(t.G,",").concat(t.B,",").concat(t.A,")"),i=document.getElementById("color-R"),o=document.getElementById("color-G"),r=document.getElementById("color-B");null!==i&&null!==o&&null!==r&&(i.value=t.R,o.value=t.G,r.value=t.B),a.props.changeColor(n)},a.state={context:null,pixel:null},a.Mouse=new b,a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.canvas=document.querySelector(".colorPallete");var t=this.canvas.getContext("2d"),a=new window.Image;this.canvas.width=150,this.canvas.height=150,a.src=R.a,t.fillStyle="black",t.fillRect(0,0,this.canvas.width,this.canvas.height),a.onload=function(){t.drawImage(a,0,0,e.canvas.width,e.canvas.height),e.setState({context:t})}}},{key:"render",value:function(){var e=this;return i.a.createElement("div",null,i.a.createElement("canvas",{className:"colorPallete",onMouseDown:this.mosueClick,onMouseMove:function(t){e.mouseMove(t)}}))}}]),t}(i.a.Component),q=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).changeMode=function(e,t){var n=a.props.returnStage().children,i=a.props.returnLayerManagement();a.props.returnStateBezier();a.state.buttonTab.forEach(function(e){e.state.mode}),i.forEach(function(t){n.forEach(function(i){"true"===t.activeLayer&&t.key===i._id&&i.children.forEach(function(t){if(console.log(t),"group"===t.id()||"bezierGroup"===t.id()){if("move"===e&&a.preventMultipleFor2&&(t.draggable(!0),a.currentIndex=i.index,n.forEach(function(e){a.lastIndex=e.index}),i.moveToTop(),a.preventMultipleFor2=!1),"bezier"===e&&a.preventMultipleFor4&&"bezierGroup"===t.id()&&(a.currentIndex=i.index,n.forEach(function(e){a.lastIndex=e.index}),i.moveToTop(),a.preventMultipleFor4=!1),"no-move"===e&&(t.draggable(!1),a.preventMultipleFor3)){for(var o=0;o<a.lastIndex-a.currentIndex;o++)i.moveDown();a.preventMultipleFor3=!1,a.lastIndex=0,a.currentIndex=0}if("no-bezier"===e&&"bezierGroup"===t.id()&&a.preventMultipleFor5){for(var r=0;r<a.lastIndex-a.currentIndex;r++)i.moveDown();a.preventMultipleFor5=!1,a.lastIndex=0,a.currentIndex=0}}})})}),a.setState({mode:e}),a.props.mode(e,a.state.buttonTab)},a.changeColor=function(e){a.setState({color:e}),a.props.color(e)},a.changeText=function(e){a.props.text(e)},a.returnColor=function(){return a.state.color},a.state={mode:"default",color:"#df4b26",draggable:!0,buttonTab:[]},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.lastIndex=0,this.currentIndex=0,this.state.buttonTab.push(this.eraser),this.state.buttonTab.push(this.move),this.state.buttonTab.push(this.pencil),this.state.buttonTab.push(this.filter),this.state.buttonTab.push(this.resize),this.state.buttonTab.push(this.shape),this.state.buttonTab.push(this.text),this.state.buttonTab.push(this.bucket),this.state.buttonTab.push(this.bezier)}},{key:"componentDidUpdate",value:function(){this.preventMultipleFor2=!0,this.preventMultipleFor3=!0,this.preventMultipleFor4=!0,this.preventMultipleFor5=!0}},{key:"render",value:function(){var e=this;return i.a.createElement("div",null,i.a.createElement(S,{changeMode:this.changeMode,ref:function(t){e.eraser=t},offAllButtons:function(){e.props.offAllButtons()}}),i.a.createElement(M,{changeMode:this.changeMode,ref:function(t){e.pencil=t},offAllButtons:function(){e.props.offAllButtons()}}),i.a.createElement(L,{changeMode:this.changeMode,ref:function(t){e.move=t},offAllButtons:function(){e.props.offAllButtons()}}),i.a.createElement(O,{changeMode:this.changeMode,ref:function(t){e.filter=t},offAllButtons:function(){e.props.offAllButtons()}}),i.a.createElement(A,{changeMode:this.changeMode,ref:function(t){e.resize=t},returnStage:this.props.returnStage,returnLayerManagement:this.props.returnLayerManagement,offAllButtons:function(){e.props.offAllButtons()}}),i.a.createElement(N,{changeMode:this.changeMode,ref:function(t){e.shape=t},offAllButtons:function(){e.props.offAllButtons()}}),i.a.createElement(j,{changeMode:this.changeMode,ref:function(t){e.text=t},offAllButtons:function(){e.props.offAllButtons()},changeText:this.changeText}),i.a.createElement(F,{changeMode:this.changeMode,ref:function(t){e.bucket=t},offAllButtons:function(){e.props.offAllButtons()},changeText:this.changeText}),i.a.createElement(T,{changeMode:this.changeMode,ref:function(t){e.bezier=t},offAllButtons:function(){e.props.offAllButtons()},changeText:this.changeText}),i.a.createElement(G,{changeColor:this.changeColor}))}}]),t}(i.a.Component),X=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).setSizePencil=function(e){a.props.changeSizePencil(e.target.value)},a.setSizeBezier=function(e){a.props.changeSizeBezier(e.target.value)},a.setSizeEraser=function(e){a.props.changeSizeEraser(e.target.value)},a.setColor=function(){var e=document.getElementById("color-R"),t=document.getElementById("color-G"),n=document.getElementById("color-B"),i="rgba("+e.value+","+t.value+","+n.value+",255)";a.props.changeColor(i)},a.setBrush=function(e){a.props.changeBrush(e.target.value)},a.setFilter=function(){var e=a.state,t="blur("+e.valueBlur+"px) brightness("+e.valueBrightness+"%) contrast("+e.valueContrast+"%) grayscale("+e.valueGrayscale+"%) hue-rotate("+e.valueHueRotate+"deg) invert("+e.valueInvert+"%) opacity("+e.valueOpacity+"%) saturate("+e.valueSaturate+"%) sepia("+e.valueSepia+"%)";document.querySelector(".konvajs-content").style.filter=t,a.props.changeFilter(t)},a.setShape=function(e){a.state.whichShape=e,a.props.changeShape(e),a.setState({whichShape:e})},a.setBezier=function(e){a.state.whichBezier=e,a.props.changeBezier(e),a.setState({whichBezier:e})},a.resetFilter=function(){a.state.valueBlur="0",a.state.valueBrightness="100",a.state.valueContrast="100",a.state.valueGrayscale="0",a.state.valueHueRotate="0",a.state.valueInvert="0",a.state.valueOpacity="100",a.state.valueSaturate="100",a.state.valueSepia="0",a.setFilter(),a.setState({valueBlur:"0",valueBrightness:"100",valueContrast:"100",valueGrayscale:"0",valueHueRotate:"0",valueInvert:"0",valueOpacity:"100",valueSaturate:"100",valueSepia:"0"})},a.changeOptionsMode=function(){var e=document.querySelector(".settings"),t=a.state,n=t.valueBlur,o=t.valueBrightness,r=t.valueContrast,s=t.valueGrayscale,l=t.valueHueRotate,c=t.valueInvert,u=t.valueOpacity,d=t.valueSaturate,h=t.valueSepia,m=t.valueSizePencil,g=t.valueSizeEraser,f=t.valueSizeBezier;switch(a.props.mode){case a.modes.PENCIL:return e.style.display="block",i.a.createElement("ul",null,i.a.createElement("li",{className:"pencil-size-options"},i.a.createElement("label",{htmlFor:"size"},"pencil size"),i.a.createElement("input",{id:"size",type:"text",value:m,onMouseLeave:function(e){e.target.blur()},onClick:function(e){e.target.select()},onChange:function(e){a.state.valueSizePencil=e.target.value,a.setSizePencil(e),e.target.value&&"0"!==e.target.value||(a.state.valueSizePencil=5,alert("Pencil size can not be a 0 or null"))}})),i.a.createElement("li",null,i.a.createElement("select",{className:"brush-list",onChange:function(e){a.setBrush(e)}},i.a.createElement("option",{value:"default"},"Default"),i.a.createElement("option",{value:"shadow"},"Shadow"),i.a.createElement("option",{value:"thick-brush"},"Thick brush"),i.a.createElement("option",{value:"spray"},"Spray"))),i.a.createElement("li",{className:"rgb-options"},i.a.createElement("label",{htmlFor:"color-R"},"R"),i.a.createElement("input",{id:"color-R",type:"text",onMouseLeave:function(e){e.target.blur()},onClick:function(e){e.target.select()},onChange:function(e){a.setColor()}}),i.a.createElement("label",{htmlFor:"color-G"},"G"),i.a.createElement("input",{id:"color-G",type:"text",onMouseLeave:function(e){e.target.blur()},onClick:function(e){e.target.select()},onChange:function(e){a.setColor()}}),i.a.createElement("label",{htmlFor:"color-B"},"B"),i.a.createElement("input",{id:"color-B",type:"text",onMouseLeave:function(e){e.target.blur()},onClick:function(e){e.target.select()},onChange:function(e){a.setColor()}})),i.a.createElement("div",{className:"color-box-wrapper"},i.a.createElement("div",{id:"color-box"})));case a.modes.ERASER:return e.style.display="block",i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement("label",{htmlFor:"size"},"eraser size"),i.a.createElement("input",{id:"size",type:"text",value:g,onMouseLeave:function(e){e.target.blur()},onClick:function(e){e.target.select()},onChange:function(e){a.state.valueSizeEraser=e.target.value,a.setSizeEraser(e),e.target.value&&"0"!==e.target.value||(a.state.valueSizeEraser=5,alert("Eraser size can not be a 0 or null"))}})));case a.modes.FILTER:return e.style.display="block",i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement("label",{htmlFor:"blur"},"blur ",n,"px"),i.a.createElement("input",{id:"blur",type:"range",min:"0",max:"20",value:n,onChange:function(e){a.state.valueBlur=e.target.value,a.setFilter(e,e.target.id,"px"),a.setState({valueBlur:e.target.value})}})),i.a.createElement("li",null,i.a.createElement("label",{htmlFor:"brightness"},"brightness ",o,"%"),i.a.createElement("input",{id:"brightness",type:"range",min:"0",max:"500",value:o,onChange:function(e){a.state.valueBrightness=e.target.value,a.setFilter(e,e.target.id,"%"),a.setState({valueBrightness:e.target.value})}})),i.a.createElement("li",null,i.a.createElement("label",{htmlFor:"contrast"},"contrast ",r,"%"),i.a.createElement("input",{id:"contrast",type:"range",onChange:function(e){a.state.valueContrast=e.target.value,a.setFilter(e,e.target.id,"%"),a.setState({valueContrast:e.target.value})}})),i.a.createElement("li",null,i.a.createElement("label",{htmlFor:"grayscale"},"grayscale ",s,"%"),i.a.createElement("input",{id:"grayscale",type:"range",min:"0",max:"100",value:s,onChange:function(e){a.state.valueGrayscale=e.target.value,a.setFilter(e,e.target.id,"%"),a.setState({valueGrayscale:e.target.value})}})),i.a.createElement("li",null,i.a.createElement("label",{htmlFor:"hue-rotate"},"hue rotate ",l,"deg"),i.a.createElement("input",{id:"hue-rotate",type:"range",min:"0",max:"360",value:l,onChange:function(e){a.state.valueHueRotate=e.target.value,a.setFilter(e,e.target.id,"%"),a.setState({valueHueRotate:e.target.value})}})),i.a.createElement("li",null,i.a.createElement("label",{htmlFor:"invert"},"invert ",c,"%"),i.a.createElement("input",{id:"invert",type:"range",min:"0",max:"100",value:c,onChange:function(e){a.state.valueInvert=e.target.value,a.setFilter(e,e.target.id,"%"),a.setState({valueInvert:e.target.value})}})),i.a.createElement("li",null,i.a.createElement("label",{htmlFor:"opacity"},"opacity ",u,"%"),i.a.createElement("input",{id:"opacity",type:"range",min:"0",max:"100",value:u,onChange:function(e){a.state.valueOpacity=e.target.value,a.setFilter(e,e.target.id,"%"),a.setState({valueOpacity:e.target.value})}})),i.a.createElement("li",null,i.a.createElement("label",{htmlFor:"saturate"},"saturate ",d,"%"),i.a.createElement("input",{id:"saturate",type:"range",min:"0",max:"500",value:d,onChange:function(e){a.state.valueSaturate=e.target.value,a.setFilter(e,e.target.id,"%"),a.setState({valueSaturate:e.target.value})}})),i.a.createElement("li",null,i.a.createElement("label",{htmlFor:"sepia"},"sepia ",h,"%"),i.a.createElement("input",{id:"sepia",type:"range",min:"0",max:"100",value:h,onChange:function(e){a.state.valueSepia=e.target.value,a.setFilter(e,e.target.id,"%"),a.setState({valueSepia:e.target.value})}})),i.a.createElement("li",null,i.a.createElement("button",{id:"reset",onMouseDown:function(){a.resetFilter()}},"reset")));case a.modes.SHAPE:return e.style.display="block",i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement("button",{onMouseDown:function(){a.setShape("rect")}},"rect")),i.a.createElement("li",null,i.a.createElement("button",{onMouseDown:function(){a.setShape("star")}},"star")),i.a.createElement("li",null,i.a.createElement("button",{onMouseDown:function(){a.setShape("arrow")}},"arrow")),i.a.createElement("li",null,i.a.createElement("button",{onMouseDown:function(){a.setShape("circle")}},"circle")),i.a.createElement("li",null,i.a.createElement("button",{onMouseDown:function(){a.setShape("ellipse")}},"ellipse")),i.a.createElement("div",{className:"color-box-wrapper"},i.a.createElement("div",{id:"color-box"})));case a.modes.BEZIER:return e.style.display="block",i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement("button",{onMouseDown:function(){a.setBezier("create-bezier")}},"Create Bezier")),i.a.createElement("li",null,i.a.createElement("button",{onMouseDown:function(){a.setBezier("modify-bezier")}},"Modify Bezier")),i.a.createElement("li",{className:"pencil-size-options"},i.a.createElement("label",{htmlFor:"size"},"pencil size"),i.a.createElement("input",{id:"size",type:"text",value:f,onMouseLeave:function(e){e.target.blur()},onClick:function(e){e.target.select()},onChange:function(e){a.state.valueSizeBezier=e.target.value,a.setSizeBezier(e),e.target.value&&"0"!==e.target.value||(a.state.valueSizeBezier=5,alert("Pencil size can not be a 0 or null"))}})),i.a.createElement("li",{className:"rgb-options"},i.a.createElement("label",{htmlFor:"color-R"},"R"),i.a.createElement("input",{id:"color-R",type:"text",onMouseLeave:function(e){e.target.blur()},onClick:function(e){e.target.select()},onChange:function(e){a.setColor()}}),i.a.createElement("label",{htmlFor:"color-G"},"G"),i.a.createElement("input",{id:"color-G",type:"text",onMouseLeave:function(e){e.target.blur()},onClick:function(e){e.target.select()},onChange:function(e){a.setColor()}}),i.a.createElement("label",{htmlFor:"color-B"},"B"),i.a.createElement("input",{id:"color-B",type:"text",onMouseLeave:function(e){e.target.blur()},onClick:function(e){e.target.select()},onChange:function(e){a.setColor()}})),i.a.createElement("div",{className:"color-box-wrapper"},i.a.createElement("div",{id:"color-box"})));default:null!==e&&(e.style.display="none")}},a.modes={PENCIL:"pencil",ERASER:"eraser",MOVE:"move",FILTER:"filter",SHAPE:"shape",BEZIER:"bezier"},a.state={valueBlur:"0",valueBrightness:"100",valueContrast:"100",valueGrayscale:"0",valueHueRotate:"0",valueInvert:"0",valueOpacity:"100",valueSaturate:"100",valueSepia:"0",valueSizePencil:5,valueSizeEraser:5,valueSizeBezier:5,whichShape:"",bezier:""},a.Mouse=new b,a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(){this.props.mode!==this.modes.PENCIL&&this.props.mode!==this.modes.SHAPE&&this.props.mode!==this.modes.BEZIER||(this.colorBox=document.querySelector("#color-box"),this.colorBox.style.backgroundColor=this.props.color);var e=document.querySelector("#color-box"),t=document.getElementById("color-R"),a=document.getElementById("color-G"),n=document.getElementById("color-B");if(null!==e&&null!==t&&null!==a&&null!==n){var i=new RegExp("\\D"),o=e.style.backgroundColor.split(i);t.value=o[4],a.value=o[6],n.value=o[8]}}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"settings",onMouseMove:function(){e.Mouse.dragLayerManagement(".settings")}},this.changeOptionsMode())}}]),t}(i.a.Component),Y=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).exitCanvasOptions=function(){a.props.popCanvasOptions()},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return i.a.createElement("ul",{className:"nav-bar"},i.a.createElement("li",{className:"nav-bar-iteam logo"},i.a.createElement("a",null,"LOGO")),i.a.createElement("li",{className:"nav-bar-iteam"},i.a.createElement("a",{onClick:this.props.popCanvasOptions},"NEW"),i.a.createElement("ul",{className:"canvas-options"},i.a.createElement("li",null,i.a.createElement("span",{className:"canvas-options-exit",onMouseDown:this.props.popCanvasOptions},"X")),i.a.createElement("li",null,i.a.createElement("label",{htmlFor:"canvas-width"},"WIDTH (in pxl)"),i.a.createElement("input",{id:"canvas-width",className:"canvas-options-input"})),i.a.createElement("li",null,i.a.createElement("label",{htmlFor:"canvas-height"},"HEIGHT (in pxl)"),i.a.createElement("input",{id:"canvas-height",className:"canvas-options-input"})),i.a.createElement("li",null,i.a.createElement("button",{className:"canvas-otpions-btn",onClick:this.props.add},"CREATE CANVAS")))),i.a.createElement("li",{className:"nav-bar-iteam"},i.a.createElement("a",null,i.a.createElement("input",{type:"file",name:"add-image",id:"add-image",onChange:this.props.addImage}),i.a.createElement("label",{htmlFor:"add-image"},"Add image"))),i.a.createElement("li",{className:"nav-bar-iteam"},i.a.createElement("a",{onClick:this.props.saveImg},"SAVE")))}}]),t}(i.a.Component),W=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).selectLayerManagementElColor=function(){var e=document.querySelectorAll(".layer-management ul li"),t=document.querySelectorAll(".invisible-btn");e.forEach(function(e){"true"===e.attributes.name.value?e.style.backgroundColor="#888":e.style.backgroundColor="#666"}),t.forEach(function(e){"true"===e.attributes.name.value?e.style.backgroundColor="#333":e.style.backgroundColor="#fff"})},a.changeMode=function(e,t){a.setState({mode:e,buttonTab:t})},a.changeColor=function(e){a.setState({color:e})},a.changeText=function(e){a.setState({text:e})},a.changeSizePencil=function(e){a.setState({sizePencil:e})},a.changeSizeEraser=function(e){a.setState({sizeEraser:e})},a.changeSizeBezier=function(e){a.setState({sizeBezier:e})},a.changeBrush=function(e){a.setState({brush:e})},a.changeFilter=function(e){a.setState({filter:e})},a.changeShape=function(e){a.setState({shape:e})},a.changeBezier=function(e){a.setState({bezier:e})},a.popCanvasOptions=function(){var e=document.querySelector(".canvas-options"),t=document.querySelector(".back"),a=document.querySelector(".nav-bar");"flex"===e.style.display?(e.style.display="none",t.style.display="none",a.style.zIndex="1"):(e.style.display="flex",t.style.display="block",a.style.zIndex="initial")},a.newFile=function(){var e=document.querySelector("#canvas-height"),t=document.querySelector("#canvas-width"),n=!1;if(a.preventCenter=!1,a.getStage.x(0),a.getStage.y(0),e.value>=32&&t.value>=32&&!isNaN(e.value)&&!isNaN(t.value)){var i=a.state.layerManagement;n=!0,a.getStage.children.forEach(function(e){a.getStage.removeChildren()}),a.defaultLayer=new g.a.Layer({id:"defaultLayer"}),a.border=new g.a.Rect({id:"border",x:0,y:0,stroke:"black",strokeWidth:1}),a.defaultLayer.add(a.border),a.getStage.add(a.defaultLayer);var o=i;o.forEach(function(e){o.splice(e,o.length)}),a.setState({layerManagement:o,widthFrame:t.value,heightFrame:e.value,newFile:!0}),a.addLayer(null,t.value,e.value,n),a.popCanvasOptions(),a.getStage.draw()}else n=!1,alert("WIDTH AND HEIGHT MUST BE A NUMBER AND BIGER THEN 32PX")},a.addDrawingCanvas=function(e,t,n){var i=a.state.layerManagement,o=a.getStage.children,r=0,s=0,l=0,c=0;0!==a.getStage.x()&&(a.preventCenter=!0,r=a.getStage.x(),s=a.getStage.y(),l=a.getStage.scaleX(),c=a.getStage.scaleY()),i.forEach(function(i){o.forEach(function(r,s){if(r._id===i.key&&s===o.length-1){var l,c=document.createElement("canvas");if(c.width=e,c.height=t,a.getStage.x((a.getStage.width()-c.width)/2),a.getStage.y((a.getStage.height()-c.height)/2),c.width>=a.getStage.width()||c.height>=a.getStage.height())for(var u=0,d=1;a.getStage.x()<=100||a.getStage.y()<=100;)if(a.getStage.scale({x:d,y:d}),a.getStage.x((a.getStage.width()-c.width*d)/2),a.getStage.y((a.getStage.height()-c.height*d)/2),d-=.01,100===++u)return;if(a.border.width(c.width),a.border.height(c.height),"shape"!==a.state.mode||"none"===a.state.shape){if(null!==n){var h=new g.a.Image({image:n,x:0,y:0,id:"imgPlace",width:n.width,height:n.height});l=new g.a.Image({image:c,x:0,y:0,id:"drawingPlace",width:n.width,height:n.height});var m=new g.a.Group({id:"group",width:n.width,height:n.height});m.add(h),m.add(l),r.add(m)}else{if("on"===a.state.text)return void a.Text.createTextArea(c,r,l,a.getStage);if("create-bezier"===a.state.bezier)return void a.BezierCurve.createBezier(c,r,l,a.getStage,a.state.sizeBezier,a.state.color);l=new g.a.Image({image:c,x:0,y:0,id:"drawingPlace"}),r.add(l)}l.on("mousedown",function(e){a.Mouse.mouseDown(e)}),l.on("mouseup",function(){a.Mouse.mouseUp()}),l.on("mousemove",function(){a.Mouse.mouseMove(l)})}else"rect"===a.state.shape?a.Shape.createRect(c,r,l,a.state.color):"star"===a.state.shape?a.Shape.createStar(c,r,l,a.state.color):"arrow"===a.state.shape?a.Shape.createArrow(c,r,l,a.state.color):"circle"===a.state.shape?a.Shape.createCircle(c,r,l,a.state.color):"ellipse"===a.state.shape&&a.Shape.createEllipse(c,r,l,a.state.color)}})}),!0===a.preventCenter&&(a.getStage.x(r),a.getStage.y(s),a.getStage.scaleX(l),a.getStage.scaleY(c)),a.getStage.draw()},a.offAllButtons=function(){"bezier"!==a.state.mode&&a.getStage.find(function(e){return"Circle"===e.className&&"anchor"===e.id()}).forEach(function(e){e.visible(!1)});a.state.bezier="none",document.querySelectorAll("img").forEach(function(e){e.id&&e.click()})},a.addImage=function(){var e=document.getElementById("add-image");if(e.files&&e.files[0]){var t=new FileReader;t.onload=function(){var e=new window.Image;e.src=t.result,e.onload=function(){a.addLayer(e)}},t.readAsDataURL(e.files[0]),e.value=""}a.offAllButtons()},a.saveImg=function(){a.offAllButtons();var e=a.state,t=e.widthFrame,n=e.heightFrame,i=e.filterTab,o=a.getStage.children,r=document.createElement("canvas");r.width=t,r.height=n;var s=r.getContext("2d");s.filter=a.state.filter;var l=0;o.forEach(function(e){!1!==e.visible()&&"defaultLayer"!==e.id()&&e.children.forEach(function(e){"group"===e.id()||"bezierGroup"===e.id()?e.children.forEach(function(t){if("imgPlace"===t.id())s.drawImage(t.getImage(),e.x(),e.y());else if("drawingPlace"===t.id())l=t.getImage(),s.drawImage(l,e.x(),e.y(),e.width(),e.height());else if("shape"===t.name()){var a=Math.abs(t.x()*e.scaleX()+e.x()),n=Math.abs(t.y()*e.scaleY()+e.y()),i=t.width()*e.scaleX(),o=t.height()*e.scaleY();"circle"===t.id()&&(a-=t.radius()*e.scaleX(),n-=t.radius()*e.scaleY()),"ellipse"===t.id()&&(a-=t.radiusX()*e.scaleX(),n-=t.radiusY()*e.scaleY()),"arrow"===t.id()&&t.points().forEach(function(e,t){2===t&&e<0&&(i*=-1),3===t&&e<0&&(o*=-1)}),l=t.toCanvas(),s.drawImage(l,a,n,i,o)}else if("text"===t.id()){var r=Math.abs(t.x()*e.scaleX()+e.x()),c=Math.abs(t.y()*e.scaleY()+e.y()),u=t.width()*e.scaleX(),d=t.height()*e.scaleY();l=t.toCanvas(),s.drawImage(l,r,c,u,d)}else"bezierImage"===t.id()&&(l=t.getImage(),s.drawImage(l,e.x(),e.y(),t.width(),t.height()))}):(l=e.getImage(),s.drawImage(l,0,0))})});var c=r.toDataURL("image/png");a.downloadImg(c,"img"),a.setState({filterTab:i}),a.offAllButtons()},a.addLayer=function(e,t,n,i){var o=a.state,r=o.layerManagement,s=o.widthFrame,l=o.heightFrame,c=o.newFile,u=a.stage.getStage().children;if(!0===i||!0===c){u.forEach(function(e){e.name("yes")}),r.forEach(function(e){e.activeLayer="false"}),void 0===n&&(t=s,n=l);var d=new g.a.Layer({id:"newLayer",name:"no",clip:{x:0,y:0,width:t,height:n}});a.defaultLayer.width(t),a.defaultLayer.height(n),a.getStage.add(d);var h=r;h.push({name:d.nodeType,key:d._id,activeLayer:"true",isVisible:"true"}),a.addDrawingCanvas(t,n,e),a.setState({layerManagement:h})}else a.offAllButtons(),alert("YOU MUST CREATE NEW FILE FIRST")},a.clickLayer=function(e){var t=a.state,n=t.layerManagement,i=(t.buttonTab,a.getStage.children),o=n;i.forEach(function(e){e.name("yes")}),n.forEach(function(e){e.activeLayer="false"}),o.forEach(function(t){e.target.id===t.key.toString()&&("false"===t.activeLayer?t.activeLayer="true":t.activeLayer="false")}),i.forEach(function(t){e.target.id===t._id.toString()&&"no"===t.name()&&(t.name("yes"),t.moveToTop())}),a.setState({layerManagement:o})},a.setInvisible=function(e){var t=a.state.layerManagement,n=a.getStage.children;t.forEach(function(t){n.forEach(function(a,n){e.target.id===a._id.toString()&&e.target.id===t.key.toString()&&(n>=1?!1===a.visible()?a.visible(!0):a.visible(!1):alert("You can not turn off last layer"))})}),t.forEach(function(t,a){e.target.id===t.key.toString()&&a>=1&&("true"===t.isVisible?t.isVisible="false":t.isVisible="true")}),a.getStage.draw()},a.removeLayer=function(){var e=a.state.layerManagement,t=a.getStage.children,n=e;n.forEach(function(a,i){1!==e.length?"true"===a.activeLayer&&(t.forEach(function(e){e._id===a.key&&e.getLayer().remove()}),n.splice(i,1)):alert("You can not delete last layer")}),n.forEach(function(t,a){e.length-1===a&&(t.activeLayer="true")}),a.setState({layerManagement:n})},a.displayLayer=function(){var e=a.state.layerManagement;a.getStage.children.forEach(function(t){"defaultLayer"!==t.id()&&e.push({name:t.nodeType,key:t._id,activeLayer:"false"})}),a.setState({layerManagement:e})},a.moveLayerUpOrBottom=function(e){var t=a.getStage.children,n=a.state.layerManagement,i=n,o=!1;Array.prototype.move=function(e,t){this.splice(t,0,this.splice(e,1)[0])},n.forEach(function(a,n){t.forEach(function(t){t._id===a.key&&"true"===a.activeLayer&&(!0===e&&n>=1?(i.move(n,n-1),t.moveDown()):!1===o&&(1===n&&(t.visible(!0),a.isVisible="true"),i.move(n,n+1),t.moveUp(),o=!0))})}),n.forEach(function(e,a){t.forEach(function(t){0===t.index&&t._id===e.key&&(t.visible(!0),e.isVisible="true")})}),a.setState({layerManagement:i})},a.returnStage=function(){return a.getStage},a.returnLayerManagement=function(){return a.state.layerManagement},a.returnStateBezier=function(){return a.state.bezier},a.state={mode:"default",color:"#000",sizePencil:5,sizeEraser:5,sizeBezier:5,shape:"none",bezier:"none",text:"off",brush:"default",filter:"",image:null,widthFrame:window.innerWidth/2,heightFrame:window.innerHeight/2,layerManagement:[],newFile:!1,buttonTab:[]},a.defaultLayer=0,a.border=0,a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;document.oncontextmenu=new Function("return false;"),this.getStage=this.stage.getStage(),this.scaleBy=1.1,this.preventCenter=!1,this.saveAnchors=0,this.tmpPointerPosition={x:0,y:0},this.anchorLocation={start:0,center:0,end:0},this.saveFirstBezierPosition=void 0,this.saveCanvas=0,this.saveBezier=0,this.endPaintShape=!1,this.getStage.on("mousedown",function(t){2===t.evt.button&&e.getStage.draggable(!0)}),this.getStage.on("mouseup",function(t){e.getStage.draggable(!1)}),window.addEventListener("wheel",function(t){e.Mouse.scroll(t,e.scaleBy)}),this.getStage.on("mouseenter",function(){var t=document.querySelector(".mouseCircle");"pencil"!==e.state.mode&&"eraser"!==e.state.mode||(t.style.display="block")}),this.getStage.on("mouseleave",function(){document.querySelector(".mouseCircle").style.display="none"}),this.displayLayer(),this.Shape=new N,this.Text=new j,this.BezierCurve=new T,this.Settings=new X}},{key:"componentDidUpdate",value:function(){var e=this;if(this.Mouse=new b(this.props,this.getStage,this.state,this.state.mode,this.state.color,this.state.sizePencil,this.state.brush,this.state.sizeEraser,this.state.shape),console.log(this.getStage),console.log(this.state.mode),console.log("TEST"),"rect"!==this.state.shape&&"star"!==this.state.shape&&"arrow"!==this.state.shape&&"circle"!==this.state.shape&&"ellipse"!==this.state.shape&&"on"!==this.state.text&&"create-bezier"!==this.state.bezier||(this.addLayer(null),this.state.shape="none",this.state.bezier="none",this.state.text="off"),"modify-bezier"===this.state.bezier){var t=this.state.layerManagement,a=this.getStage.children;t.forEach(function(t){a.forEach(function(a,n){"true"===t.activeLayer&&a._id===t.key&&(e.saveAnchors=a.find("Circle"),e.saveAnchors.forEach(function(e){e.visible(!0)}))})})}this.selectLayerManagementElColor(),this.getStage.on("mousedown",function(t){if("bucket"===e.state.mode){var a=e.state.layerManagement,n=e.getStage.children;a.forEach(function(a){n.forEach(function(n,i){if("true"===a.activeLayer&&n._id===a.key){if("drawingPlace"===n.children[0].id()&&t.target===n.children[0]){var o=n.children[0].getImage().getContext("2d");o.fillStyle=e.state.color,o.fillRect(n.children[0].x(),n.children[0].y(),n.children[0].width(),n.children[0].height())}"group"===n.children[0].id()&&("shape"===n.children[0].children[0].name()&&t.target===n.children[0].children[0]&&(n.children[0].children[0].fill(e.state.color),n.children[0].children[0].stroke(e.state.color)),"text"===n.children[0].children[0].id()&&t.target===n.children[0].children[0]&&n.children[0].children[0].fill(e.state.color))}})}),e.getStage.draw()}if("text"===e.state.mode){var i=e.state.layerManagement,o=e.getStage.children;i.forEach(function(t){o.forEach(function(a,n){if("true"===t.activeLayer&&a._id===t.key){var i=a.children[0].x()*e.getStage.scaleX(),o=a.children[0].y()*e.getStage.scaleY(),r={x:(e.getStage.getPointerPosition().x-e.getStage.x()-i)/e.getStage.scaleX(),y:(e.getStage.getPointerPosition().y-e.getStage.y()-o)/e.getStage.scaleY()};a.children[0].children[0].x(r.x),a.children[0].children[0].y(r.y),a.children[0].children[0].text("Some Text")}})}),e.offAllButtons()}else"shape"!==e.state.mode&&"bezier"!==e.state.mode||(e.endPaintShape=!0,e.tmpPointerPosition={x:e.getStage.getPointerPosition().x,y:e.getStage.getPointerPosition().y})}),this.getStage.on("mouseup",function(){if("shape"===e.state.mode||"bezier"===e.state.mode){var t;if(e.endPaintShape=!1,"bezier"===e.state.mode){var a=e.saveCanvas.getContext("2d");if("modify-bezier"!==e.state.bezier)e.getStage.find(function(e){return"Circle"===e.className&&"anchor"===e.id()}).forEach(function(t){t.visible(!1),e.getStage.draw()}),a.clearRect(0,0,e.saveCanvas.width,e.saveCanvas.height),a.beginPath(),a.moveTo(e.anchorLocation.start.x,e.anchorLocation.start.y),a.lineTo(e.anchorLocation.end.x,e.anchorLocation.end.y),a.closePath(),a.stroke(),e.anchorLocation.center.x<0&&(e.anchorLocation.center.x=-1*e.anchorLocation.center.x),e.anchorLocation.center.y<0&&(e.anchorLocation.center.y=-1*e.anchorLocation.center.y),e.BezierCurve.createAnchor(e.anchorLocation.start.x,e.anchorLocation.start.y,e.getStage),e.BezierCurve.createAnchor(e.anchorLocation.center.x,e.anchorLocation.center.y,e.getStage),e.BezierCurve.createAnchor(e.anchorLocation.center.x-50,e.anchorLocation.center.y-50,e.getStage),e.BezierCurve.createAnchor(e.anchorLocation.end.x,e.anchorLocation.end.y,e.getStage),t=e.getStage.find(function(e){return"Circle"===e.className&&e.visible()});else t=e.saveAnchors;t.forEach(function(n){n.on("dragmove",function(){a.clearRect(0,0,e.saveCanvas.width,e.saveCanvas.height),a.beginPath(),a.moveTo(t[0].attrs.x,t[0].attrs.y),a.bezierCurveTo(t[1].attrs.x,t[1].attrs.y,t[2].attrs.x-50,t[2].attrs.y-50,t[3].attrs.x,t[3].attrs.y),a.stroke(),e.getStage.draw()})}),e.saveBezier.clipFunc(function(e,t){var a=[],n=[];t.children.forEach(function(e){"anchor"===e.id()&&(a.push(e.x()),n.push(e.y()))});var i=Math.max.apply(Math,a),o=Math.max.apply(Math,n),r=Math.min.apply(Math,n),s=Math.min.apply(Math,a);e.clearRect(0,0,800,800),e.rect(s-20,r-20,Math.abs(i-s)+40,Math.abs(r-o)+40)}),e.getStage.draw()}console.log(e.state.bezier),"modify-bezier"!==e.state.bezier&&e.offAllButtons(),e.saveFirstBezierPosition=void 0}}),this.getStage.on("mousemove",function(t){if(("shape"===e.state.mode||"bezier"===e.state.mode)&&"modify-bezier"!==e.state.bezier){var a=e.state.layerManagement,n=e.getStage.children;if(!e.endPaintShape)return;a.forEach(function(t){n.forEach(function(a,n){if("true"===t.activeLayer&&a._id===t.key){var i=a.children[0].x()*e.getStage.scaleX(),o=a.children[0].y()*e.getStage.scaleY(),r={x:(e.getStage.getPointerPosition().x-e.getStage.x()-i)/e.getStage.scaleX(),y:(e.getStage.getPointerPosition().y-e.getStage.y()-o)/e.getStage.scaleY()},s={x:(e.tmpPointerPosition.x-e.getStage.x()-i)/e.getStage.scaleX(),y:(e.tmpPointerPosition.y-e.getStage.y()-o)/e.getStage.scaleY()};if("bezier"===e.state.mode){var l=a.children[0].children[0].getImage();e.saveCanvas=l,e.saveBezier=a.children[0];var c=l.getContext("2d");c.beginPath(),r={x:(e.tmpPointerPosition.x-e.getStage.x()-i)/e.getStage.scaleX(),y:(e.tmpPointerPosition.y-e.getStage.y()-o)/e.getStage.scaleY()},void 0===e.saveFirstBezierPosition&&(e.saveFirstBezierPosition=r),c.moveTo(r.x,r.y);var u=e.getStage.getPointerPosition(),d=((r={x:(u.x-e.getStage.x()-i)/e.getStage.scaleX(),y:(u.y-e.getStage.y()-o)/e.getStage.scaleY()}).x-e.saveFirstBezierPosition.x)/2,h=(r.y-e.saveFirstBezierPosition.y)/2;e.anchorLocation={start:e.saveFirstBezierPosition,center:{x:r.x-d,y:r.y-h},end:r},c.lineTo(r.x,r.y),c.closePath(),c.stroke(),e.tmpPointerPosition=u,e.getStage.draw()}"shape"===e.state.mode&&"Group"===a.children[0].nodeType&&(a.children[0].children[0].x(s.x),a.children[0].children[0].y(s.y),a.children[0].children[0].width(r.x-s.x),a.children[0].children[0].height(r.y-s.y),a.children[0].children[0].fill(e.state.color),a.children[0].children[0].stroke(e.state.color),"Arrow"===a.children[0].children[0].className&&a.children[0].children[0].points([0,0,r.x-s.x,r.y-s.y]),"Circle"===a.children[0].children[0].className&&a.children[0].children[0].attrs.radius<0&&(a.children[0].children[0].attrs.radius=0),"Ellipse"===a.children[0].children[0].className&&(a.children[0].children[0].attrs.radiusX<0&&(a.children[0].children[0].attrs.radiusX=0),a.children[0].children[0].attrs.radiusY<0&&(a.children[0].children[0].attrs.radiusX=0)),e.getStage.draw())}})})}})}},{key:"downloadImg",value:function(e,t){var a=document.createElement("a");a.download=t,a.href=e,document.body.appendChild(a),a.click(),document.body.removeChild(a)}},{key:"render",value:function(){var e=this;return this.buttonUpClick=!1,i.a.createElement("div",{className:"react-app"},i.a.createElement("div",{className:"mouseCircle"}),i.a.createElement("div",{className:"back"}),i.a.createElement(Y,{clearDrawingPlace:this.clearDrawingPlace,addImage:this.addImage,clearAll:this.clearAll,saveImg:this.saveImg,add:this.newFile,popCanvasOptions:this.popCanvasOptions}),i.a.createElement("main",null,i.a.createElement("div",{className:"layer-management",onMouseMove:function(t){e.Mouse.dragLayerManagement(".layer-management",t)}},i.a.createElement("ul",null,this.state.layerManagement.map(function(t,a){return i.a.createElement("div",null,i.a.createElement("li",{id:t.key,key:t.key,name:t.activeLayer,onMouseDown:function(t){e.offAllButtons(),e.clickLayer(t)}},i.a.createElement("div",{className:"invisible-btn",id:t.key,name:t.isVisible,onMouseDown:function(t){e.offAllButtons(),e.setInvisible(t)}},"o"),a," ",t.name," ",t.key))})),i.a.createElement("div",{className:"options"},i.a.createElement("div",{className:"move-options"},i.a.createElement("button",{className:"layer-management-options-btn up-btn",onMouseDown:function(){e.buttonUpClick=!0,e.moveLayerUpOrBottom(e.buttonUpClick),e.offAllButtons()}},"/\\"),i.a.createElement("button",{className:"layer-management-options-btn down-btn",onMouseDown:function(){e.buttonUpClick=!1,e.moveLayerUpOrBottom(e.buttonUpClick),e.offAllButtons()}},"\\/")),i.a.createElement("button",{className:"layer-management-options-btn add-btn",onClick:function(){e.offAllButtons(),e.addLayer(null)}},"add"),i.a.createElement("button",{className:"layer-management-options-btn remove-btn",onClick:function(){e.offAllButtons(),e.removeLayer()}},"remove"))),i.a.createElement(q,{mode:this.changeMode,color:this.changeColor,ref:function(t){e.tob=t},returnStage:this.returnStage,returnStateBezier:this.returnStateBezier,returnLayerManagement:this.returnLayerManagement,offAllButtons:this.offAllButtons,text:this.changeText}),i.a.createElement(X,{changeSizePencil:this.changeSizePencil,changeSizeEraser:this.changeSizeEraser,changeSizeBezier:this.changeSizeBezier,mode:this.state.mode,color:this.state.color,changeColor:this.changeColor,changeFilter:this.changeFilter,changeBrush:this.changeBrush,changeShape:this.changeShape,changeBezier:this.changeBezier,returnStage:this.returnStage}),i.a.createElement(h.Stage,{className:"drawing-place stage",width:window.innerWidth,height:window.innerHeight-100-13,onMouseMove:function(t){e.Mouse.mouseCircle(t)},ref:function(t){e.stage=t},fill:"red"})),i.a.createElement("footer",null,i.a.createElement("div",{className:"footer-wrapper wrapper"},"Soon there will be a footer here !")))}}]),t}(i.a.Component),H=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function U(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}r.a.render(i.a.createElement(W,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/Paint-React",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/Paint-React","/service-worker.js");H?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):U(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):U(e)})}}()}],[[17,2,1]]]);
//# sourceMappingURL=main.67b25d30.chunk.js.map